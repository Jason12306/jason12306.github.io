(function(){try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode(".map-container{--gap: 30px;--root-radius: 30px;--main-radius: 20px;--root-color: #ffffff;--root-bgcolor: #4c4f69;--root-border-color: rgba(0, 0, 0, 0);--main-color: #444446;--main-bgcolor: #ffffff;--topic-padding: 3px;--color: #777777;--bgcolor: #f6f6f6;--selected: #4dc4ff;--panel-color: #444446;--panel-bgcolor: #ffffff;--panel-border-color: #eaeaea;-webkit-tap-highlight-color:rgba(0,0,0,0);font-family:-apple-system,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Microsoft YaHei,Source Han Sans SC,Noto Sans CJK SC,WenQuanYi Micro Hei,sans-serif;-webkit-user-select:none;user-select:none;height:100%;width:100%;overflow:scroll;font-size:15px}.map-container *{box-sizing:border-box}.map-container::-webkit-scrollbar{width:0px;height:0px}.map-container .selected{outline:2px solid var(--selected);outline-offset:1px}.map-container .hyper-link{text-decoration:none;margin-left:.3em}.map-container .lhs{direction:rtl}.map-container .lhs me-tpc{direction:ltr}.map-container .map-canvas{height:20000px;width:20000px;position:relative;-webkit-user-select:none;user-select:none;transition:transform .3s;transform:scale(1);background-color:var(--bgcolor)}.map-container .map-canvas me-nodes{position:absolute;display:flex;justify-content:center;align-items:center;height:fit-content;width:fit-content}.map-container .map-canvas me-root{position:relative}.map-container .map-canvas me-root me-tpc{display:block;font-size:25px;color:var(--root-color);padding:10px var(--gap);border-radius:var(--root-radius);border:var(--root-border-color) 2px solid;white-space:pre-wrap;background-color:var(--root-bgcolor)}.map-container me-main>me-wrapper{position:relative;margin:45px 65px}.map-container me-main>me-wrapper>me-parent{margin:10px;padding:0}.map-container me-main>me-wrapper>me-parent>me-tpc{border-radius:var(--main-radius);background-color:var(--main-bgcolor);border:2px solid var(--main-color);color:var(--main-color);padding:8px 25px}.map-container me-wrapper{display:block;pointer-events:none;width:fit-content}.map-container me-children,.map-container me-parent{display:inline-block;vertical-align:middle}.map-container me-parent{position:relative;cursor:pointer;padding:6px var(--gap);margin-top:10px}.map-container me-parent me-tpc{position:relative;display:block;border-radius:3px;color:var(--color);pointer-events:all;max-width:35em;white-space:pre-wrap;padding:var(--topic-padding)}.map-container me-parent me-tpc .insert-preview{position:absolute;width:100%;left:0;z-index:9}.map-container me-parent me-tpc .show{background:#7ad5ff;pointer-events:none;opacity:.7}.map-container me-parent me-tpc .before{height:14px;top:-14px}.map-container me-parent me-tpc .in{height:100%;top:0}.map-container me-parent me-tpc .after{height:14px;bottom:-14px}.map-container me-parent me-epd{position:absolute;height:18px;width:18px;opacity:.8;background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgdD0iMTY1NjY1NDcxNzI0MiIgY2xhc3M9Imljb24iIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiIHZlcnNpb249IjEuMSIKICAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+CiAgICA8cGF0aCBkPSJNNTEyIDc0LjY2NjY2N0MyNzAuOTMzMzMzIDc0LjY2NjY2NyA3NC42NjY2NjcgMjcwLjkzMzMzMyA3NC42NjY2NjcgNTEyUzI3MC45MzMzMzMgOTQ5LjMzMzMzMyA1MTIgOTQ5LjMzMzMzMyA5NDkuMzMzMzMzIDc1My4wNjY2NjcgOTQ5LjMzMzMzMyA1MTIgNzUzLjA2NjY2NyA3NC42NjY2NjcgNTEyIDc0LjY2NjY2N3oiIHN0cm9rZS13aWR0aD0iNTQiIHN0cm9rZT0nYmxhY2snIGZpbGw9J3doaXRlJyA+PC9wYXRoPgogICAgPHBhdGggZD0iTTY4Mi42NjY2NjcgNDgwaC0xMzguNjY2NjY3VjM0MS4zMzMzMzNjMC0xNy4wNjY2NjctMTQuOTMzMzMzLTMyLTMyLTMycy0zMiAxNC45MzMzMzMtMzIgMzJ2MTM4LjY2NjY2N0gzNDEuMzMzMzMzYy0xNy4wNjY2NjcgMC0zMiAxNC45MzMzMzMtMzIgMzJzMTQuOTMzMzMzIDMyIDMyIDMyaDEzOC42NjY2NjdWNjgyLjY2NjY2N2MwIDE3LjA2NjY2NyAxNC45MzMzMzMgMzIgMzIgMzJzMzItMTQuOTMzMzMzIDMyLTMydi0xMzguNjY2NjY3SDY4Mi42NjY2NjdjMTcuMDY2NjY3IDAgMzItMTQuOTMzMzMzIDMyLTMycy0xNC45MzMzMzMtMzItMzItMzJ6Ij48L3BhdGg+Cjwvc3ZnPg==);background-repeat:no-repeat;background-size:contain;background-position:center;pointer-events:all;z-index:9}.map-container me-parent me-epd.minus{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgdD0iMTY1NjY1NTU2NDk4NSIgY2xhc3M9Imljb24iIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiIHZlcnNpb249IjEuMSIKICAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+CiAgICA8cGF0aCBkPSJNNTEyIDc0LjY2NjY2N0MyNzAuOTMzMzMzIDc0LjY2NjY2NyA3NC42NjY2NjcgMjcwLjkzMzMzMyA3NC42NjY2NjcgNTEyUzI3MC45MzMzMzMgOTQ5LjMzMzMzMyA1MTIgOTQ5LjMzMzMzMyA5NDkuMzMzMzMzIDc1My4wNjY2NjcgOTQ5LjMzMzMzMyA1MTIgNzUzLjA2NjY2NyA3NC42NjY2NjcgNTEyIDc0LjY2NjY2N3oiIHN0cm9rZS13aWR0aD0iNTQiIHN0cm9rZT0nYmxhY2snIGZpbGw9J3doaXRlJyA+PC9wYXRoPgogICAgPHBhdGggZD0iTTY4Mi42NjY2NjcgNTQ0SDM0MS4zMzMzMzNjLTE3LjA2NjY2NyAwLTMyLTE0LjkzMzMzMy0zMi0zMnMxNC45MzMzMzMtMzIgMzItMzJoMzQxLjMzMzMzNGMxNy4wNjY2NjcgMCAzMiAxNC45MzMzMzMgMzIgMzJzLTE0LjkzMzMzMyAzMi0zMiAzMnoiPjwvcGF0aD4KPC9zdmc+)!important;transition:opacity .3s;opacity:0}.map-container me-parent me-epd.minus:hover{opacity:.8}.map-container .icon{width:1em;height:1em;vertical-align:-.15em;fill:currentColor;overflow:hidden}.map-container .lines,.map-container .summary,.map-container .subLines,.map-container .topiclinks,.map-container .linkcontroller{position:absolute;height:102%;width:100%;top:0;left:0}.map-container .topiclinks,.map-container .linkcontroller,.map-container .summary{pointer-events:none}.map-container .topiclinks text,.map-container .linkcontroller text,.map-container .summary text{pointer-events:all}.map-container .topiclinks .selected,.map-container .linkcontroller .selected,.map-container .summary .selected{pointer-events:none}.map-container .lines,.map-container .subLines{pointer-events:none;z-index:-1}.map-container .topiclinks *,.map-container .linkcontroller *{z-index:100}.map-container .topiclinks g{cursor:pointer}.map-container #input-box{position:absolute;top:0;left:0;width:max-content;max-width:35em;z-index:11;direction:ltr;-webkit-user-select:auto;user-select:auto;pointer-events:auto;background-color:var(--bgcolor)}.map-container me-tpc>*{pointer-events:none}.map-container me-tpc>a,.map-container me-tpc>iframe{pointer-events:auto}.map-container me-tpc>img{display:block;margin-bottom:8px;object-fit:cover}.map-container me-tpc>.text{display:inline-block}.map-container .circle{position:absolute;height:10px;width:10px;margin-top:-5px;margin-left:-5px;border-radius:100%;background:#757575;border:2px solid #ffffff;cursor:pointer}.map-container .tags{direction:ltr}.map-container .tags span{display:inline-block;border-radius:3px;padding:2px 4px;background:#d6f0f8;color:#276f86;margin:2px 4px 0 0;font-size:12px;line-height:1.3em}.map-container .icons{display:inline-block;direction:ltr;margin-left:5px}.map-container .icons span{display:inline-block;line-height:1.3em}.map-container .mind-elixir-ghost{position:fixed;top:-100%;left:-100%;box-sizing:content-box;opacity:.5;background-color:var(--main-bgcolor);border:2px solid var(--main-color);color:var(--main-color);max-width:200px;width:fit-content;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;padding:8px 16px;border-radius:6px}.map-container .selection-area{background:#4f90f22d;border:1px solid #4f90f2}.map-container .context-menu{position:fixed;top:0;left:0;width:100%;height:100%;z-index:99}.map-container .context-menu .menu-list{position:fixed;list-style:none;margin:0;padding:0;color:var(--panel-color);box-shadow:0 12px 15px #0003;border-radius:5px;overflow:hidden}.map-container .context-menu .menu-list li{min-width:200px;overflow:hidden;white-space:nowrap;padding:6px 10px;background:var(--panel-bgcolor);border-bottom:1px solid var(--panel-border-color);cursor:pointer}.map-container .context-menu .menu-list li span{line-height:20px}.map-container .context-menu .menu-list li a{color:#333;text-decoration:none}.map-container .context-menu .menu-list li.disabled{display:none}.map-container .context-menu .menu-list li:hover{filter:brightness(.95)}.map-container .context-menu .menu-list li:last-child{border-bottom:0}.map-container .context-menu .menu-list li span:last-child{float:right}.map-container .context-menu .key{font-size:10px;background-color:#f1f1f1;color:#333;padding:2px 5px;border-radius:3px}.map-container .tips{position:absolute;bottom:20px;left:50%;transform:translate(-50%);color:var(--panel-color);font-weight:bolder}.mind-elixir-toolbar{font-family:iconfont;position:absolute;color:var(--panel-color);background:var(--panel-bgcolor);padding:10px;border-radius:5px;box-shadow:0 1px 2px #0003}.mind-elixir-toolbar svg{display:inline-block}.mind-elixir-toolbar span:active{opacity:.5}.mind-elixir-toolbar.rb{right:20px;bottom:20px}.mind-elixir-toolbar.rb span+span{margin-left:10px}.mind-elixir-toolbar.lt{font-size:20px;left:20px;top:20px}.mind-elixir-toolbar.lt span{display:block}.mind-elixir-toolbar.lt span+span{margin-top:10px}")),document.head.appendChild(e)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}})();(function(e){var t,n,i,o,r,s,l='<svg><symbol id="icon-edit" viewBox="0 0 1024 1024"><path d="M423.765333 128a42.666667 42.666667 0 0 1 3.2 85.205333L423.765333 213.333333H234.666667a64 64 0 0 0-63.872 60.245334L170.666667 277.333333v512a64 64 0 0 0 60.245333 63.872L234.666667 853.333333h512a64 64 0 0 0 63.872-60.245333L810.666667 789.333333v-189.098666a42.666667 42.666667 0 0 1 85.205333-3.2l0.128 3.2V789.333333a149.333333 149.333333 0 0 1-144.213333 149.248L746.666667 938.666667h-512a149.333333 149.333333 0 0 1-149.248-144.213334L85.333333 789.333333v-512a149.333333 149.333333 0 0 1 144.213334-149.248L234.666667 128h189.098666z m324.949334-53.248a42.666667 42.666667 0 0 1 60.330666 0l150.869334 150.869333a42.666667 42.666667 0 0 1 0 60.330667l-329.386667 329.386667a42.666667 42.666667 0 0 1-29.44 12.458666l-153.386667 2.517334a42.666667 42.666667 0 0 1-43.349333-43.349334l2.56-153.386666a42.666667 42.666667 0 0 1 12.458667-29.44z m30.165333 90.496L491.946667 452.266667l-1.493334 91.989333 92.032-1.493333 286.976-286.976-90.538666-90.538667z"  ></path></symbol><symbol id="icon-rising" viewBox="0 0 1024 1024"><path d="M553.173333 803.84h-64l0.021334-474.581333-224.021334 224-45.269333-45.226667L521.6 206.293333l301.717333 301.696-45.269333 45.269334-224.853333-224.896v475.477333z"  ></path></symbol><symbol id="icon-falling" viewBox="0 0 1024 1024"><path d="M553.173333 238.314667h-64l0.021334 474.602666-224.021334-224-45.269333 45.226667L521.6 835.861333l301.717333-301.717333-45.269333-45.226667-224.853333 224.853334V238.336z"  ></path></symbol><symbol id="icon-shanchu2" viewBox="0 0 1024 1024"><path d="M516.60601807 107.93026734c-82.64382935 0-149.71865844 65.51751709-152.5729065 147.77160644H171.37136841c-21.40603638 0-38.92044068 17.38504028-38.92044068 38.92126465 0 21.40686036 17.38504028 38.92208862 38.92126466 38.92208862h42.94308471v435.40136719c0 81.73498536 55.39828492 148.55026245 123.90106201 148.55026245h348.99444581c68.37341309 0 123.90106201-66.42553711 123.901062-148.55026245V333.80477906h38.92126465c21.40686036 0 38.92126464-17.38586426 38.92126465-38.92208863 0-21.40686036-17.38504028-38.92126464-38.92126465-38.92126465H668.91854859C666.45321656 173.44860839 599.24902344 107.93109131 516.60601807 107.93109131z m-79.65939331 147.77160644c2.85424805-42.16442872 37.2354126-74.85809326 79.78875732-74.85809326s76.93450927 32.82302857 79.39984131 74.85809326H436.94662476z m-98.86047364 589.01165771c-24.2611084 0-50.98754883-31.13717651-50.98754883-75.76693725V333.80477906h450.97036744V769.33551026c0 44.50039673-26.72644043 75.76776123-50.98754884 75.76776122H338.08615112v-0.38973999z m0 0"  ></path><path d="M390.37063599 751.17263794c17.77313232 0 32.43411255-17.7739563 32.43411255-40.08883667V482.35504151c0-22.31488037-14.53079224-40.08966065-32.43411255-40.08966065-17.77478027 0-32.43493653 17.77478027-32.43493653 40.08966065v228.72875976c0 22.18469239 14.27124023 40.08883667 32.43493653 40.08883667z m117.41308594 0c17.7739563 0 32.43411255-17.7739563 32.43411255-40.08883667V482.35504151c0-22.31488037-14.53079224-40.08966065-32.43411255-40.08966065-17.7739563 0-32.43493653 17.77478027-32.43493653 40.08966065v228.72875976c0 22.18469239 14.66098023 40.08883667 32.43493653 40.08883667z m123.51049804 0c17.7739563 0 32.43493653-17.7739563 32.43493652-40.08883667V482.35504151c0-22.31488037-14.53079224-40.08966065-32.43493652-40.08966065-17.7739563 0-32.43411255 17.77478027-32.43411255 40.08966065v228.72875976c0 22.18469239 14.14105224 40.08883667 32.43411255 40.08883667z m0 0"  ></path></symbol><symbol id="icon-zijiedian" viewBox="0 0 1024 1024"><path d="M312.208 472c19.568-157.856 153.432-280 315.656-280 175.68 0 318.112 143.272 318.112 320S803.552 832 627.864 832c-162.224 0-296.08-122.144-315.656-280H120a40 40 0 0 1 0-80h192.208zM632 752c132.552 0 240-107.448 240-240 0-132.552-107.448-240-240-240-132.552 0-240 107.448-240 240 0 132.552 107.448 240 240 240z m-40-280v-80a40 40 0 0 1 80 0v80h80a40 40 0 0 1 0 80h-80v80a40 40 0 0 1-80 0v-80h-80a40 40 0 0 1 0-80h80z"  ></path></symbol><symbol id="icon-tongjijiedian-" viewBox="0 0 1024 1024"><path d="M803.84 131.626667H410.24A59.733333 59.733333 0 0 0 350.506667 192v45.226667H199.68a51.626667 51.626667 0 0 0-51.626667 51.626666v465.92a51.626667 51.626667 0 0 0 51.626667 51.626667h187.52v-55.466667h-162.133333a21.333333 21.333333 0 0 1-21.333334-21.333333V313.386667a21.333333 21.333333 0 0 1 21.333334-21.333334h125.653333v64a59.733333 59.733333 0 0 0 59.733333 59.733334h393.386667a59.733333 59.733333 0 0 0 59.733333-59.733334V192a59.733333 59.733333 0 0 0-59.733333-60.373333z m4.266667 224.64a4.266667 4.266667 0 0 1-4.266667 4.266666H410.24a4.266667 4.266667 0 0 1-4.266667-4.266666V192a4.266667 4.266667 0 0 1 4.266667-4.266667h393.6a4.266667 4.266667 0 0 1 4.266667 4.266667zM716.16 749.44h-81.28v-81.493333a27.733333 27.733333 0 0 0-55.466667 0v81.28h-81.493333a27.733333 27.733333 0 1 0 0 55.466666h81.28v81.28a27.733333 27.733333 0 1 0 55.466667 0v-81.066666h81.28a27.733333 27.733333 0 0 0 0-55.466667z"  ></path></symbol><symbol id="icon-close" viewBox="0 0 1024 1024"><path d="M557.312 513.248l265.28-263.904c12.544-12.48 12.608-32.704 0.128-45.248-12.512-12.576-32.704-12.608-45.248-0.128L512.128 467.904l-263.04-263.84c-12.448-12.48-32.704-12.544-45.248-0.064-12.512 12.48-12.544 32.736-0.064 45.28l262.976 263.776L201.6 776.8c-12.544 12.48-12.608 32.704-0.128 45.248a31.937 31.937 0 0 0 22.688 9.44c8.16 0 16.32-3.104 22.56-9.312l265.216-263.808 265.44 266.24c6.24 6.272 14.432 9.408 22.656 9.408a31.94 31.94 0 0 0 22.592-9.344c12.512-12.48 12.544-32.704 0.064-45.248L557.312 513.248z" fill="" ></path></symbol><symbol id="icon-menu" viewBox="0 0 1024 1024"><path d="M109.714 292.571h804.572c21.943 0 36.571-21.942 36.571-43.885 0-14.629-14.628-29.257-36.571-29.257H109.714c-21.943 0-36.571 14.628-36.571 36.571 0 14.629 14.628 36.571 36.571 36.571zM914.286 512H109.714c-21.943 0-36.571 14.629-36.571 36.571 0 14.629 14.628 36.572 36.571 36.572h804.572c21.943 0 36.571-21.943 36.571-43.886 0-14.628-14.628-29.257-36.571-29.257z m0 292.571H109.714c-21.943 0-36.571 14.629-36.571 36.572s14.628 36.571 36.571 36.571h804.572c21.943 0 36.571-21.943 36.571-36.571 0-21.943-14.628-36.572-36.571-36.572z"  ></path></symbol><symbol id="icon-right" viewBox="0 0 1024 1024"><path d="M385 560.69999999L385 738.9c0 36.90000001 26.4 68.5 61.3 68.5l150.2 0c1.5 0 3-0.1 4.5-0.3 10.2 38.7 45.5 67.3 87.5 67.3 50 0 90.5-40.5 90.5-90.5s-40.5-90.5-90.5-90.5c-42 0-77.3 28.6-87.5 67.39999999-1.4-0.3-2.9-0.4-4.5-0.39999999L446.3 760.4c-6.8 0-14.3-8.9-14.3-21.49999999l0-427.00000001c0-12.7 7.40000001-21.5 14.30000001-21.5l150.19999999 0c1.5 0 3-0.2 4.5-0.4 10.2 38.8 45.5 67.3 87.5 67.3 50 0 90.5-40.5 90.5-90.4 0-49.9-40.5-90.6-90.5-90.59999999-42 0-77.3 28.6-87.5 67.39999999-1.4-0.2-2.9-0.4-4.49999999-0.4L446.3 243.3c-34.80000001 0-61.3 31.6-61.3 68.50000001L385 513.7l-79.1 0c-10.4-38.5-45.49999999-67-87.4-67-50 0-90.5 40.5-90.5 90.5s40.5 90.5 90.5 90.5c41.79999999 0 77.00000001-28.4 87.4-67L385 560.69999999z" fill="" ></path></symbol><symbol id="icon-left" viewBox="0 0 1024 1024"><path d="M639 463.30000001L639 285.1c0-36.90000001-26.4-68.5-61.3-68.5l-150.2 0c-1.5 0-3 0.1-4.5 0.3-10.2-38.7-45.5-67.3-87.5-67.3-50 0-90.5 40.5-90.5 90.5s40.5 90.5 90.5 90.5c42 0 77.3-28.6 87.5-67.39999999 1.4 0.3 2.9 0.4 4.5 0.39999999L577.7 263.6c6.8 0 14.3 8.9 14.3 21.49999999l0 427.00000001c0 12.7-7.40000001 21.5-14.30000001 21.5l-150.19999999 0c-1.5 0-3 0.2-4.5 0.4-10.2-38.8-45.5-67.3-87.5-67.3-50 0-90.5 40.5-90.5 90.4 0 49.9 40.5 90.6 90.5 90.59999999 42 0 77.3-28.6 87.5-67.39999999 1.4 0.2 2.9 0.4 4.49999999 0.4L577.7 780.7c34.80000001 0 61.3-31.6 61.3-68.50000001L639 510.3l79.1 0c10.4 38.5 45.49999999 67 87.4 67 50 0 90.5-40.5 90.5-90.5s-40.5-90.5-90.5-90.5c-41.79999999 0-77.00000001 28.4-87.4 67L639 463.30000001z" fill="" ></path></symbol><symbol id="icon-side" viewBox="0 0 1024 1024"><path d="M851.91168 328.45312c-59.97056 0-108.6208 48.47104-108.91264 108.36992l-137.92768 38.4a109.14304 109.14304 0 0 0-63.46752-46.58688l1.39264-137.11872c47.29344-11.86816 82.31936-54.66624 82.31936-105.64096 0-60.15488-48.76288-108.91776-108.91776-108.91776s-108.91776 48.76288-108.91776 108.91776c0 49.18784 32.60928 90.75712 77.38368 104.27392l-1.41312 138.87488a109.19936 109.19936 0 0 0-63.50336 48.55808l-138.93632-39.48544 0.01024-0.72704c0-60.15488-48.76288-108.91776-108.91776-108.91776s-108.91776 48.75776-108.91776 108.91776c0 60.15488 48.76288 108.91264 108.91776 108.91264 39.3984 0 73.91232-20.92032 93.03552-52.2496l139.19232 39.552-0.00512 0.2304c0 25.8304 9.00096 49.5616 24.02816 68.23424l-90.14272 132.63872a108.7488 108.7488 0 0 0-34.2528-5.504c-60.15488 0-108.91776 48.768-108.91776 108.91776 0 60.16 48.76288 108.91776 108.91776 108.91776 60.16 0 108.92288-48.75776 108.92288-108.91776 0-27.14624-9.9328-51.968-26.36288-71.04l89.04704-131.03104a108.544 108.544 0 0 0 37.6832 6.70208 108.672 108.672 0 0 0 36.48512-6.272l93.13792 132.57216a108.48256 108.48256 0 0 0-24.69888 69.0688c0 60.16 48.768 108.92288 108.91776 108.92288 60.16 0 108.91776-48.76288 108.91776-108.92288 0-60.14976-48.75776-108.91776-108.91776-108.91776a108.80512 108.80512 0 0 0-36.69504 6.3488l-93.07136-132.48a108.48768 108.48768 0 0 0 24.79616-72.22784l136.09984-37.888c18.99008 31.93856 53.84192 53.3504 93.69088 53.3504 60.16 0 108.92288-48.75776 108.92288-108.91264-0.00512-60.15488-48.77312-108.92288-108.92288-108.92288z"  ></path></symbol><symbol id="icon-B" viewBox="0 0 1024 1024"><path d="M98.067692 65.457231H481.28c75.854769 0 132.411077 3.150769 169.668923 9.452307 37.336615 6.301538 70.656 19.534769 100.036923 39.620924 29.459692 20.007385 53.956923 46.710154 73.570462 80.029538 19.692308 33.398154 29.459692 70.734769 29.459692 112.167385 0 44.898462-12.130462 86.094769-36.233846 123.588923a224.886154 224.886154 0 0 1-98.461539 84.283077c58.368 17.092923 103.266462 46.08 134.695385 87.04 31.350154 40.96 47.025231 89.088 47.025231 144.462769 0 43.638154-10.082462 86.016-30.404923 127.212308-20.243692 41.196308-47.891692 74.043077-83.02277 98.697846-35.052308 24.654769-78.296615 39.778462-129.732923 45.449846-32.295385 3.465846-110.119385 5.671385-233.472 6.537846H98.067692V65.457231z m193.536 159.507692V446.621538h126.818462c75.460923 0 122.328615-1.024 140.603077-3.229538 33.083077-3.938462 59.155692-15.36 78.139077-34.343385 18.904615-18.904615 28.435692-43.874462 28.435692-74.830769 0-29.696-8.192-53.720615-24.497231-72.310154-16.384-18.510769-40.644923-29.696-72.940307-33.634461-19.140923-2.205538-74.279385-3.308308-165.415385-3.308308h-111.064615z m0 381.243077v256.315077h179.2c69.710769 0 113.979077-1.969231 132.726154-5.907692 28.750769-5.198769 52.145231-17.959385 70.262154-38.281847 18.116923-20.243692 27.096615-47.340308 27.096615-81.368615 0-28.750769-6.931692-53.169231-20.873846-73.255385a118.232615 118.232615 0 0 0-60.494769-43.795692c-26.387692-9.137231-83.574154-13.705846-171.638154-13.705846H291.603692z"  ></path></symbol><symbol id="icon-a" viewBox="0 0 1024 1024"><path d="M757.76 665.6q0 20.48 1.536 34.304t7.68 22.016 18.944 12.288 34.304 4.096q-3.072 25.6-15.36 44.032-11.264 16.384-33.28 29.696t-62.976 13.312q-11.264 0-20.48-0.512t-17.408-2.56l-6.144-2.048-1.024 0q-4.096-1.024-10.24-4.096-2.048-2.048-4.096-2.048-1.024-1.024-2.048-1.024-14.336-8.192-23.552-17.408t-14.336-17.408q-6.144-10.24-9.216-20.48-63.488 75.776-178.176 75.776-48.128 0-88.064-15.36t-69.12-44.032-45.056-68.096-15.872-88.576 16.896-89.088 47.616-67.584 74.24-42.496 96.768-14.848q48.128 0 88.576 17.408t66.048 49.152q0-8.192 0.512-16.384t0.512-15.36q0-71.68-39.936-104.448t-128-32.768q-43.008 0-84.992 6.656t-84.992 17.92q14.336-28.672 25.088-47.616t24.064-29.184q30.72-24.576 158.72-24.576 79.872 0 135.168 13.824t90.624 43.52 51.2 75.264 15.872 108.032l0 200.704zM487.424 743.424q50.176 0 79.872-33.28t29.696-95.744q0-61.44-28.672-93.696t-76.8-32.256q-52.224 0-82.944 33.28t-30.72 94.72q0 58.368 31.744 92.672t77.824 34.304z"  ></path></symbol><symbol id="icon-full" viewBox="0 0 1024 1024"><path d="M639.328 416c8.032 0 16.096-3.008 22.304-9.056l202.624-197.184-0.8 143.808c-0.096 17.696 14.144 32.096 31.808 32.192 0.064 0 0.128 0 0.192 0 17.6 0 31.904-14.208 32-31.808l1.248-222.208c0-0.672-0.352-1.248-0.384-1.92 0.032-0.512 0.288-0.896 0.288-1.408 0.032-17.664-14.272-32-31.968-32.032L671.552 96l-0.032 0c-17.664 0-31.968 14.304-32 31.968C639.488 145.632 653.824 160 671.488 160l151.872 0.224-206.368 200.8c-12.672 12.32-12.928 32.608-0.64 45.248C622.656 412.736 630.976 416 639.328 416z"  ></path><path d="M896.032 639.552 896.032 639.552c-17.696 0-32 14.304-32.032 31.968l-0.224 151.872-200.832-206.4c-12.32-12.64-32.576-12.96-45.248-0.64-12.672 12.352-12.928 32.608-0.64 45.248l197.184 202.624-143.808-0.8c-0.064 0-0.128 0-0.192 0-17.6 0-31.904 14.208-32 31.808-0.096 17.696 14.144 32.096 31.808 32.192l222.24 1.248c0.064 0 0.128 0 0.192 0 0.64 0 1.12-0.32 1.76-0.352 0.512 0.032 0.896 0.288 1.408 0.288l0.032 0c17.664 0 31.968-14.304 32-31.968L928 671.584C928.032 653.952 913.728 639.584 896.032 639.552z"  ></path><path d="M209.76 159.744l143.808 0.8c0.064 0 0.128 0 0.192 0 17.6 0 31.904-14.208 32-31.808 0.096-17.696-14.144-32.096-31.808-32.192L131.68 95.328c-0.064 0-0.128 0-0.192 0-0.672 0-1.248 0.352-1.888 0.384-0.448 0-0.8-0.256-1.248-0.256 0 0-0.032 0-0.032 0-17.664 0-31.968 14.304-32 31.968L96 352.448c-0.032 17.664 14.272 32 31.968 32.032 0 0 0.032 0 0.032 0 17.664 0 31.968-14.304 32-31.968l0.224-151.936 200.832 206.4c6.272 6.464 14.624 9.696 22.944 9.696 8.032 0 16.096-3.008 22.304-9.056 12.672-12.32 12.96-32.608 0.64-45.248L209.76 159.744z"  ></path><path d="M362.368 617.056l-202.624 197.184 0.8-143.808c0.096-17.696-14.144-32.096-31.808-32.192-0.064 0-0.128 0-0.192 0-17.6 0-31.904 14.208-32 31.808l-1.248 222.24c0 0.704 0.352 1.312 0.384 2.016 0 0.448-0.256 0.832-0.256 1.312-0.032 17.664 14.272 32 31.968 32.032L352.448 928c0 0 0.032 0 0.032 0 17.664 0 31.968-14.304 32-31.968s-14.272-32-31.968-32.032l-151.936-0.224 206.4-200.832c12.672-12.352 12.96-32.608 0.64-45.248S375.008 604.704 362.368 617.056z"  ></path></symbol><symbol id="icon-add" viewBox="0 0 1024 1024"><path d="M863.328 482.56l-317.344-1.12L545.984 162.816c0-17.664-14.336-32-32-32s-32 14.336-32 32l0 318.4L159.616 480.064c-0.032 0-0.064 0-0.096 0-17.632 0-31.936 14.24-32 31.904C127.424 529.632 141.728 544 159.392 544.064l322.592 1.152 0 319.168c0 17.696 14.336 32 32 32s32-14.304 32-32l0-318.944 317.088 1.12c0.064 0 0.096 0 0.128 0 17.632 0 31.936-14.24 32-31.904C895.264 496.992 880.96 482.624 863.328 482.56z"  ></path></symbol><symbol id="icon-move" viewBox="0 0 1024 1024"><path d="M863.744 544 163.424 544c-17.664 0-32-14.336-32-32s14.336-32 32-32l700.32 0c17.696 0 32 14.336 32 32S881.44 544 863.744 544z"  ></path></symbol><symbol id="icon-living" viewBox="0 0 1024 1024"><path d="M514.133333 488.533333m-106.666666 0a106.666667 106.666667 0 1 0 213.333333 0 106.666667 106.666667 0 1 0-213.333333 0Z" fill="" ></path><path d="M512 64C264.533333 64 64 264.533333 64 512c0 236.8 183.466667 428.8 416 445.866667v-134.4c-53.333333-59.733333-200.533333-230.4-200.533333-334.933334 0-130.133333 104.533333-234.666667 234.666666-234.666666s234.666667 104.533333 234.666667 234.666666c0 61.866667-49.066667 153.6-145.066667 270.933334l-59.733333 68.266666V960C776.533333 942.933333 960 748.8 960 512c0-247.466667-200.533333-448-448-448z" fill="" ></path></symbol></svg>',a=(a=document.getElementsByTagName("script"))[a.length-1].getAttribute("data-injectcss");if(a&&!e.__iconfont__svg__cssinject__){e.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch{}}function c(){r||(r=!0,i())}t=function(){var d,p,h,m;(m=document.createElement("div")).innerHTML=l,l=null,(h=m.getElementsByTagName("svg")[0])&&(h.setAttribute("aria-hidden","true"),h.style.position="absolute",h.style.width=0,h.style.height=0,h.style.overflow="hidden",d=h,(p=document.body).firstChild?(m=d,(h=p.firstChild).parentNode.insertBefore(m,h)):p.appendChild(d))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(t,0):(n=function(){document.removeEventListener("DOMContentLoaded",n,!1),t()},document.addEventListener("DOMContentLoaded",n,!1)):document.attachEvent&&(i=t,o=e.document,r=!1,(s=function(){try{o.documentElement.doScroll("left")}catch{return void setTimeout(s,50)}c()})(),o.onreadystatechange=function(){o.readyState=="complete"&&(o.onreadystatechange=null,c())})})(window);const T=0,O=1,ce=2,Oe={name:"Latte",type:"light",palette:["#dd7878","#ea76cb","#8839ef","#e64553","#fe640b","#df8e1d","#40a02b","#209fb5","#1e66f5","#7287fd"],cssVar:{"--gap":"30px","--main-color":"#444446","--main-bgcolor":"#ffffff","--color":"#777777","--bgcolor":"#f6f6f6","--panel-color":"#444446","--panel-bgcolor":"#ffffff","--panel-border-color":"#eaeaea"}},$e={name:"Dark",type:"dark",palette:["#848FA0","#748BE9","#D2F9FE","#4145A5","#789AFA","#706CF4","#EF987F","#775DD5","#FCEECF","#DA7FBC"],cssVar:{"--main-color":"#ffffff","--main-bgcolor":"#4c4f69","--color":"#cccccc","--bgcolor":"#252526","--panel-color":"#ffffff","--panel-bgcolor":"#2d3748","--panel-border-color":"#696969"}};function oe(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;")}const re=function(e,t){if(t.id===e)return t;if(t.children&&t.children.length){for(let n=0;n<t.children.length;n++){const i=re(e,t.children[n]);if(i)return i}return null}else return null},$=(e,t)=>{if(e.parent=t,e.children)for(let n=0;n<e.children.length;n++)$(e.children[n],e)};function me(e){if(e.id=q(),e.children)for(let t=0;t<e.children.length;t++)me(e.children[t])}function se(e,t,n,i){const o=i-t,r=e-n;let s=Math.atan(Math.abs(o)/Math.abs(r))/3.14*180;r<0&&o>0&&(s=180-s),r<0&&o<0&&(s=180+s),r>0&&o<0&&(s=360-s);const l=12,a=30,c=s+a,d=s-a;return{x1:n+Math.cos(Math.PI*c/180)*l,y1:i-Math.sin(Math.PI*c/180)*l,x2:n+Math.cos(Math.PI*d/180)*l,y2:i-Math.sin(Math.PI*d/180)*l}}function q(){return(new Date().getTime().toString(16)+Math.random().toString(16).substr(2)).substr(2,16)}const tt=function(){const e=q();return{topic:this.newTopicName,id:e}};function fe(e){return JSON.parse(JSON.stringify(e,(t,n)=>{if(t!=="parent")return n}))}const P=(e,t)=>{let n=0,i=0;for(;t&&t!==e;)n+=t.offsetLeft,i+=t.offsetTop,t=t.offsetParent;return{offsetLeft:n,offsetTop:i}},N=(e,t)=>{for(const n in t)e.setAttribute(n,t[n])},he=e=>e?e.tagName==="ME-TPC":!1,de=e=>e.filter(t=>{for(let n=0;n<e.length;n++)if(t!==e[n]&&e[n].parentElement.parentElement.contains(t))return!1;return!0}),k={moved:!1,mousedown:!1,onMove(e,t){if(this.mousedown){this.moved=!0;const n=e.movementX,i=e.movementY,{container:o,map:r,scaleVal:s}=t;let l=o.scrollLeft-n,a=o.scrollTop-i;if(s<1){const c=(o.scrollWidth-r.clientWidth*s)/2,d=(o.scrollHeight-r.clientHeight*s)/2;l=Math.max(c,Math.min(o.scrollWidth-c-o.clientWidth,l)),a=Math.max(d,Math.min(o.scrollHeight-d-o.clientHeight,a))}o.scrollTo(l,a)}},clear(){setTimeout(()=>{this.moved=!1,this.mousedown=!1},0)}};function nt(e){e.map.addEventListener("click",t=>{var n,i;if(t.button!==0)return;if((n=e.helper1)!=null&&n.moved){e.helper1.clear();return}if((i=e.helper2)!=null&&i.moved){e.helper2.clear();return}if(k.moved){k.clear();return}e.clearSelection();const o=t.target;if(o.tagName==="ME-EPD")e.expandNode(o.previousSibling);else if(he(o))e.selectNode(o,!1,t);else if(e.editable)o.tagName==="text"?o.dataset.type==="custom-link"?e.selectArrow(o.parentElement):e.selectSummary(o.parentElement):o.className;else return}),e.map.addEventListener("dblclick",t=>{if(!e.editable)return;const n=t.target;he(n)?e.beginEdit(n):n.tagName==="text"&&(n.dataset.type==="custom-link"?e.editArrowLabel(n.parentElement):e.editSummary(n.parentElement))}),e.map.addEventListener("mousemove",t=>{t.target.contentEditable==="inherit"&&k.onMove(t,e)}),e.map.addEventListener("mousedown",t=>{const n=e.mouseSelectionButton===0?2:0;t.button===n&&t.target.contentEditable==="inherit"&&(k.moved=!1,k.mousedown=!0)}),e.map.addEventListener("mouseleave",t=>{const n=e.mouseSelectionButton===0?2:0;t.button===n&&k.clear()}),e.map.addEventListener("mouseup",t=>{const n=e.mouseSelectionButton===0?2:0;t.button===n&&k.clear()})}const it={create(){return{handlers:{},showHandler:function(){},addListener:function(e,t){this.handlers[e]===void 0&&(this.handlers[e]=[]),this.handlers[e].push(t)},fire:function(e,...t){if(this.handlers[e]instanceof Array){const n=this.handlers[e];for(let i=0;i<n.length;i++)n[i](...t)}},removeListener:function(e,t){if(!this.handlers[e])return;const n=this.handlers[e];if(!t)n.length=0;else if(n.length)for(let i=0;i<n.length;i++)n[i]===t&&this.handlers[e].splice(i,1)}}}};var j=(e=>(e.LHS="lhs",e.RHS="rhs",e))(j||{});const le=document,ot=function(){this.nodes.innerHTML="";const e=this.createTopic(this.nodeData);ge(e,this.nodeData),e.draggable=!1;const t=le.createElement("me-root");t.appendChild(e);const n=this.nodeData.children||[];if(this.direction===ce){let i=0,o=0;n.map(r=>{r.direction===T?i+=1:r.direction===O?o+=1:i<=o?(r.direction=T,i+=1):(r.direction=O,o+=1)})}rt(this,n,t)},rt=function(e,t,n){const i=le.createElement("me-main");i.className=j.LHS;const o=le.createElement("me-main");o.className=j.RHS;for(let r=0;r<t.length;r++){const s=t[r],{grp:l}=e.createWrapper(s);e.direction===ce?s.direction===T?i.appendChild(l):o.appendChild(l):e.direction===T?i.appendChild(l):o.appendChild(l)}e.nodes.appendChild(i),e.nodes.appendChild(n),e.nodes.appendChild(o),e.nodes.appendChild(e.lines)},st=function(e,t){const n=le.createElement("me-children");for(let i=0;i<t.length;i++){const o=t[i],{grp:r}=e.createWrapper(o);n.appendChild(r)}return n},_=document,E=(e,t)=>{const n=(t?t.el:_).querySelector(`[data-nodeid=me${e}]`);if(!n)throw new Error(`FindEle: Node ${e} not found, maybe it's collapsed.`);return n},ge=function(e,t){if(e.innerHTML="",t.style&&(e.style.color=t.style.color||"",e.style.background=t.style.background||"",e.style.fontSize=t.style.fontSize+"px",e.style.fontWeight=t.style.fontWeight||"normal"),t.dangerouslySetInnerHTML){e.innerHTML=t.dangerouslySetInnerHTML;return}if(t.image){const n=t.image;if(n.url&&n.width&&n.height){const i=_.createElement("img");i.src=n.url,i.style.width=n.width+"px",i.style.height=n.height+"px",n.fit&&(i.style.objectFit=n.fit),e.appendChild(i),e.image=i}}else e.image&&(e.image=void 0);{const n=_.createElement("span");n.className="text",n.textContent=t.topic,e.appendChild(n),e.text=n}if(t.hyperLink){const n=_.createElement("a");n.className="hyper-link",n.target="_blank",n.innerText="ðŸ”—",n.href=t.hyperLink,e.appendChild(n),e.link=n}else e.link&&(e.link=void 0);if(t.icons&&t.icons.length){const n=_.createElement("span");n.className="icons",n.innerHTML=t.icons.map(i=>`<span>${oe(i)}</span>`).join(""),e.appendChild(n),e.icons=n}else e.icons&&(e.icons=void 0);if(t.tags&&t.tags.length){const n=_.createElement("div");n.className="tags",n.innerHTML=t.tags.map(i=>`<span>${oe(i)}</span>`).join(""),e.appendChild(n),e.tags=n}else e.tags&&(e.tags=void 0)},lt=function(e,t){const n=_.createElement("me-wrapper"),{p:i,tpc:o}=this.createParent(e);if(n.appendChild(i),!t&&e.children&&e.children.length>0){const r=ve(e.expanded);if(i.appendChild(r),e.expanded!==!1){const s=st(this,e.children);n.appendChild(s)}}return{grp:n,top:i,tpc:o}},at=function(e){const t=_.createElement("me-parent"),n=this.createTopic(e);return ge(n,e),t.appendChild(n),{p:t,tpc:n}},ct=function(e){const t=_.createElement("me-children");return t.append(...e),t},dt=function(e){const t=_.createElement("me-tpc");return t.nodeObj=e,t.dataset.nodeid="me"+e.id,t.draggable=this.draggable,t};function Pe(e){const t=_.createRange();t.selectNodeContents(e);const n=window.getSelection();n&&(n.removeAllRanges(),n.addRange(t))}const ht=function(e){if(!e)return;const t=_.createElement("div"),n=e.text.textContent;e.appendChild(t),t.id="input-box",t.textContent=n,t.contentEditable="plaintext-only",t.spellcheck=!1;const i=getComputedStyle(e);t.style.cssText=`min-width:${e.offsetWidth-8}px;
  color:${i.color};
  padding:${i.padding};
  margin:${i.margin};
  font:${i.font};
  background-color:${i.backgroundColor!=="rgba(0, 0, 0, 0)"&&i.backgroundColor};
  border-radius:${i.borderRadius};`,this.direction===T&&(t.style.right="0"),t.focus(),Pe(t),this.bus.fire("operation",{name:"beginEdit",obj:e.nodeObj}),t.addEventListener("keydown",o=>{o.stopPropagation();const r=o.key;if(r==="Enter"||r==="Tab"){if(o.shiftKey)return;o.preventDefault(),t.blur(),this.map.focus()}}),t.addEventListener("blur",()=>{var o;if(!t)return;const r=e.nodeObj,s=((o=t.textContent)==null?void 0:o.trim())||"";s===""?r.topic=n:r.topic=s,t.remove(),s!==n&&(e.text.textContent=r.topic,this.linkDiv(),this.bus.fire("operation",{name:"finishEdit",obj:r,origin:n}))})},ve=function(e){const t=_.createElement("me-epd");return t.expanded=e!==!1,t.className=e!==!1?"minus":"",t},V=document,X="http://www.w3.org/2000/svg",Be=function(e,t,n){const i=V.createElementNS(X,"path");return N(i,{d:e,stroke:t||"#666",fill:"none","stroke-width":n}),i},G=function(e){const t=V.createElementNS(X,"svg");return t.setAttribute("class",e),t.setAttribute("overflow","visible"),t},Me=function(){const e=V.createElementNS(X,"line");return e.setAttribute("stroke","#bbb"),e.setAttribute("fill","none"),e.setAttribute("stroke-width","2"),e},pt=function(e,t,n){const i={stroke:"rgb(235, 95, 82)",fill:"none","stroke-linecap":"cap","stroke-width":"2"},o=V.createElementNS(X,"g");return[e,t,n].forEach((r,s)=>{const l=V.createElementNS(X,"path"),a={d:r,...i};N(l,a),s===0&&l.setAttribute("stroke-dasharray","8,2"),o.appendChild(l)}),o},Re=function(e,t,n){if(!t)return;const i=V.createElement("div");e.nodes.appendChild(i);const o=t.innerHTML;i.id="input-box",i.textContent=o,i.contentEditable="plaintext-only",i.spellcheck=!1;const r=t.getBBox();i.style.cssText=`
    min-width:${Math.max(88,r.width)}px;
    position:absolute;
    left:${r.x}px;
    top:${r.y}px;
    padding: 2px 4px;
    margin: -2px -4px; 
  `,i.focus(),Pe(i),i.addEventListener("keydown",s=>{s.stopPropagation();const l=s.key;if(l==="Enter"||l==="Tab"){if(s.shiftKey)return;s.preventDefault(),i.blur(),e.map.focus()}}),i.addEventListener("blur",()=>{i&&n(i)})},ut=function(e){const t=this.map.querySelector("me-root"),n=t.offsetTop,i=t.offsetLeft,o=t.offsetWidth,r=t.offsetHeight,s=this.map.querySelector("me-nodes").offsetWidth;this.nodes.style.top=`${1e4-this.nodes.offsetHeight/2}px`,this.alignment==="root"?this.nodes.style.left=`${1e4-i-o/2}px`:this.nodes.style.left=`${1e4-s/2}px`;const l=this.map.querySelectorAll("me-main > me-wrapper");this.lines.innerHTML="";for(let a=0;a<l.length;a++){const c=l[a],d=c.querySelector("me-tpc"),{offsetLeft:p,offsetTop:h}=P(this.nodes,d),m=d.offsetWidth,f=d.offsetHeight,v=c.parentNode.className,g=this.generateMainBranch({pT:n,pL:i,pW:o,pH:r,cT:h,cL:p,cW:m,cH:f,direction:v,containerHeight:this.nodes.offsetHeight}),u=this.theme.palette,b=d.nodeObj.branchColor||u[a%u.length];d.style.borderColor=b,this.lines.appendChild(Be(g,b,"3"));const x=c.children[0].children[1];if(x&&(x.style.top=(x.parentNode.offsetHeight-x.offsetHeight)/2+"px",v===j.LHS?x.style.left="-10px":x.style.right="-10px"),e&&e!==c)continue;const C=G("subLines"),y=c.lastChild;y.tagName==="svg"&&y.remove(),c.appendChild(C),Ye(this,C,b,c,v,!0)}this.renderArrow(),this.renderSummary(),this.bus.fire("linkDiv")},Ye=function(e,t,n,i,o,r){const s=i.firstChild,l=i.children[1].children;if(l.length===0)return;const a=s.offsetTop,c=s.offsetLeft,d=s.offsetWidth,p=s.offsetHeight;for(let h=0;h<l.length;h++){const m=l[h],f=m.firstChild,v=f.offsetTop,g=f.offsetLeft,u=f.offsetWidth,b=f.offsetHeight,x=f.firstChild.nodeObj.branchColor||n,C=e.generateSubBranch({pT:a,pL:c,pW:d,pH:p,cT:v,cL:g,cW:u,cH:b,direction:o,isFirst:r});t.appendChild(Be(C,x,"2"));const y=f.children[1];if(y){if(y.style.bottom=-(y.offsetHeight/2)+"px",o===j.LHS?y.style.left="10px":o===j.RHS&&(y.style.right="10px"),!y.expanded)continue}else continue;Ye(e,t,x,m,o)}},Ne={addChild:"æ’å…¥å­èŠ‚ç‚¹",addParent:"æ’å…¥çˆ¶èŠ‚ç‚¹",addSibling:"æ’å…¥åŒçº§èŠ‚ç‚¹",removeNode:"åˆ é™¤èŠ‚ç‚¹",focus:"ä¸“æ³¨",cancelFocus:"å–æ¶ˆä¸“æ³¨",moveUp:"ä¸Šç§»",moveDown:"ä¸‹ç§»",link:"è¿žæŽ¥",clickTips:"è¯·ç‚¹å‡»ç›®æ ‡èŠ‚ç‚¹",summary:"æ‘˜è¦"},Ee={cn:Ne,zh_CN:Ne,zh_TW:{addChild:"æ’å…¥å­ç¯€é»ž",addParent:"æ’å…¥çˆ¶ç¯€é»ž",addSibling:"æ’å…¥åŒç´šç¯€é»ž",removeNode:"åˆªé™¤ç¯€é»ž",focus:"å°ˆæ³¨",cancelFocus:"å–æ¶ˆå°ˆæ³¨",moveUp:"ä¸Šç§»",moveDown:"ä¸‹ç§»",link:"é€£æŽ¥",clickTips:"è«‹é»žæ“Šç›®æ¨™ç¯€é»ž",summary:"æ‘˜è¦"},en:{addChild:"Add child",addParent:"Add parent",addSibling:"Add sibling",removeNode:"Remove node",focus:"Focus Mode",cancelFocus:"Cancel Focus Mode",moveUp:"Move up",moveDown:"Move down",link:"Link",clickTips:"Please click the target node",summary:"Summary"},ru:{addChild:"Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð´Ð¾Ñ‡ÐµÑ€Ð½Ð¸Ð¹ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚",addParent:"Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ñ€Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÑÐºÐ¸Ð¹ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚",addSibling:"Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð½Ð° ÑÑ‚Ð¾Ð¼ ÑƒÑ€Ð¾Ð²Ð½Ðµ",removeNode:"Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ ÑƒÐ·ÐµÐ»",focus:"Ð ÐµÐ¶Ð¸Ð¼ Ñ„Ð¾ÐºÑƒÑÐ¸Ñ€Ð¾Ð²ÐºÐ¸",cancelFocus:"ÐžÑ‚Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ñ€ÐµÐ¶Ð¸Ð¼ Ñ„Ð¾ÐºÑƒÑÐ¸Ñ€Ð¾Ð²ÐºÐ¸",moveUp:"ÐŸÐ¾Ð´Ð½ÑÑ‚ÑŒ Ð²Ñ‹ÑˆÐµ",moveDown:"ÐžÐ¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ Ð½Ð¸Ð¶Ðµ",link:"Ð¡ÑÑ‹Ð»ÐºÐ°",clickTips:"ÐŸÐ¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, Ð½Ð°Ð¶Ð¼Ð¸Ñ‚Ðµ Ð½Ð° Ñ†ÐµÐ»ÐµÐ²Ð¾Ð¹ ÑƒÐ·ÐµÐ»",summary:"ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ"},ja:{addChild:"å­ãƒŽãƒ¼ãƒ‰ã‚’è¿½åŠ ã™ã‚‹",addParent:"è¦ªãƒŽãƒ¼ãƒ‰ã‚’è¿½åŠ ã—ã¾ã™",addSibling:"å…„å¼ŸãƒŽãƒ¼ãƒ‰ã‚’è¿½åŠ ã™ã‚‹",removeNode:"ãƒŽãƒ¼ãƒ‰ã‚’å‰Šé™¤",focus:"é›†ä¸­",cancelFocus:"é›†ä¸­è§£é™¤",moveUp:"ä¸Šã¸ç§»å‹•",moveDown:"ä¸‹ã¸ç§»å‹•",link:"ã‚³ãƒã‚¯ãƒˆ",clickTips:"ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒŽãƒ¼ãƒ‰ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„",summary:"æ¦‚è¦"},pt:{addChild:"Adicionar item filho",addParent:"Adicionar item pai",addSibling:"Adicionar item irmao",removeNode:"Remover item",focus:"Modo Foco",cancelFocus:"Cancelar Modo Foco",moveUp:"Mover para cima",moveDown:"Mover para baixo",link:"Link",clickTips:"Favor clicar no item alvo",summary:"Resumo"},it:{addChild:"Aggiungi figlio",addParent:"Aggiungi genitore",addSibling:"Aggiungi fratello",removeNode:"Rimuovi nodo",focus:"ModalitÃ  Focus",cancelFocus:"Annulla ModalitÃ  Focus",moveUp:"Sposta su",moveDown:"Sposta giÃ¹",link:"Collega",clickTips:"Si prega di fare clic sul nodo di destinazione",summary:"Unisci nodi"},es:{addChild:"Agregar hijo",addParent:"Agregar padre",addSibling:"Agregar hermano",removeNode:"Eliminar nodo",focus:"Modo Enfoque",cancelFocus:"Cancelar Modo Enfoque",moveUp:"Mover hacia arriba",moveDown:"Mover hacia abajo",link:"Enlace",clickTips:"Por favor haga clic en el nodo de destino",summary:"Resumen"},fr:{addChild:"Ajout enfant",addParent:"Ajout parent",addSibling:"Ajout voisin",removeNode:"Supprimer",focus:"Cibler",cancelFocus:"Retour",moveUp:"Monter",moveDown:"Descendre",link:"Lier",clickTips:"Cliquer sur le noeud cible",summary:"Annoter"},ko:{addChild:"ìžì‹ ì¶”ê°€",addParent:"ë¶€ëª¨ ì¶”ê°€",addSibling:"í˜•ì œ ì¶”ê°€",removeNode:"ë…¸ë“œ ì‚­ì œ",focus:"í¬ì»¤ìŠ¤ ëª¨ë“œ",cancelFocus:"í¬ì»¤ìŠ¤ ëª¨ë“œ ì·¨ì†Œ",moveUp:"ìœ„ë¡œ ì´ë™",moveDown:"ì•„ëž˜ë¡œ ì´ë™",link:"ì—°ê²°",clickTips:"ëŒ€ìƒ ë…¸ë“œë¥¼ í´ë¦­í•˜ì‹­ì‹œì˜¤",summary:"ìš”ì•½"}};function mt(e,t){t=t===!0?{focus:!0,link:!0}:t;const n=y=>{const w=document.createElement("div");return w.innerText=y,w.className="tips",w},i=(y,w,L)=>{const S=document.createElement("li");return S.id=y,S.innerHTML=`<span>${oe(w)}</span><span ${L?'class="key"':""}>${oe(L)}</span>`,S},o=Ee[e.locale]?e.locale:"en",r=Ee[o],s=i("cm-add_child",r.addChild,"Tab"),l=i("cm-add_parent",r.addParent,"Ctrl + Enter"),a=i("cm-add_sibling",r.addSibling,"Enter"),c=i("cm-remove_child",r.removeNode,"Delete"),d=i("cm-fucus",r.focus,""),p=i("cm-unfucus",r.cancelFocus,""),h=i("cm-up",r.moveUp,"PgUp"),m=i("cm-down",r.moveDown,"Pgdn"),f=i("cm-link",r.link,""),v=i("cm-link-bidirectional","Bidirectional Link",""),g=i("cm-summary",r.summary,""),u=document.createElement("ul");if(u.className="menu-list",u.appendChild(s),u.appendChild(l),u.appendChild(a),u.appendChild(c),t.focus&&(u.appendChild(d),u.appendChild(p)),u.appendChild(h),u.appendChild(m),u.appendChild(g),t.link&&(u.appendChild(f),u.appendChild(v)),t&&t.extend)for(let y=0;y<t.extend.length;y++){const w=t.extend[y],L=i(w.name,w.name,w.key||"");u.appendChild(L),L.onclick=S=>{w.onclick(S)}}const b=document.createElement("div");b.className="context-menu",b.appendChild(u),b.hidden=!0,e.container.append(b);let x=!0;e.container.oncontextmenu=function(y){if(y.preventDefault(),!e.editable||k.moved)return;const w=y.target;if(he(w)){w.parentElement.tagName==="ME-ROOT"?x=!0:x=!1,x?(d.className="disabled",h.className="disabled",m.className="disabled",l.className="disabled",a.className="disabled",c.className="disabled"):(d.className="",h.className="",m.className="",l.className="",a.className="",c.className=""),e.currentNodes||e.selectNode(w),b.hidden=!1,k.mousedown&&(k.mousedown=!1),u.style.top="",u.style.bottom="",u.style.left="",u.style.right="";const L=u.getBoundingClientRect(),S=u.offsetHeight,A=u.offsetWidth,U=y.clientY-L.top,Z=y.clientX-L.left;S+U>window.innerHeight?(u.style.top="",u.style.bottom="0px"):(u.style.bottom="",u.style.top=U+15+"px"),A+Z>window.innerWidth?(u.style.left="",u.style.right="0px"):(u.style.right="",u.style.left=Z+10+"px")}},b.onclick=y=>{y.target===b&&(b.hidden=!0)},s.onclick=()=>{e.addChild(),b.hidden=!0},l.onclick=()=>{e.insertParent(),b.hidden=!0},a.onclick=()=>{x||(e.insertSibling("after"),b.hidden=!0)},c.onclick=()=>{x||(e.removeNode(),b.hidden=!0)},d.onclick=()=>{x||(e.focusNode(e.currentNode),b.hidden=!0)},p.onclick=()=>{e.cancelFocus(),b.hidden=!0},h.onclick=()=>{x||(e.moveUpNode(),b.hidden=!0)},m.onclick=()=>{x||(e.moveDownNode(),b.hidden=!0)};const C=y=>{b.hidden=!0;const w=e.currentNode,L=n(r.clickTips);e.container.appendChild(L),e.map.addEventListener("click",S=>{S.preventDefault(),L.remove();const A=S.target;(A.parentElement.tagName==="ME-PARENT"||A.parentElement.tagName==="ME-ROOT")&&e.createArrow(w,A,y)},{once:!0})};return f.onclick=()=>C(),v.onclick=()=>C({bidirectional:!0}),g.onclick=()=>{b.hidden=!0,e.createSummary(),e.unselectNodes()},()=>{s.onclick=null,l.onclick=null,a.onclick=null,c.onclick=null,d.onclick=null,p.onclick=null,h.onclick=null,m.onclick=null,f.onclick=null,g.onclick=null,b.onclick=null,e.container.oncontextmenu=null}}const ft=e=>{const t=e.map.querySelectorAll(".lhs>me-wrapper>me-parent>me-tpc");e.selectNode(t[Math.ceil(t.length/2)-1])},gt=e=>{const t=e.map.querySelectorAll(".rhs>me-wrapper>me-parent>me-tpc");e.selectNode(t[Math.ceil(t.length/2)-1])},vt=e=>{e.selectNode(e.map.querySelector("me-root>me-tpc"))},bt=function(e,t){const n=t.parentElement.parentElement.parentElement.previousSibling;if(n){const i=n.firstChild;e.selectNode(i)}},yt=function(e,t){const n=t.parentElement.nextSibling;if(n&&n.firstChild){const i=n.firstChild.firstChild.firstChild;e.selectNode(i)}},Ce=function(e,t){var n,i;const o=e.currentNode||((n=e.currentNodes)==null?void 0:n[0]);if(!o)return;const r=o.nodeObj,s=o.offsetParent.offsetParent.parentElement;r.parent?s.className===t?yt(e,o):(i=r.parent)!=null&&i.parent?bt(e,o):vt(e):t===j.LHS?ft(e):gt(e)},Se=function(e,t){var n;const i=e.currentNode||((n=e.currentNodes)==null?void 0:n[0]);if(!i||!i.nodeObj.parent)return;const o=t+"Sibling",r=i.parentElement.parentElement[o];r&&e.selectNode(r.firstChild.firstChild)},ee=function(e,t){switch(t){case"in":if(e.scaleVal>1.6)return;e.scale(e.scaleVal+=e.scaleSensitivity);break;case"out":if(e.scaleVal<.6)return;e.scale(e.scaleVal-=e.scaleSensitivity)}};function xt(e,t){t=t===!0?{}:t;const n=()=>{e.currentArrow?e.removeArrow():e.currentSummary?e.removeSummary(e.currentSummary.summaryObj.id):e.currentNode?e.removeNode():e.currentNodes&&e.removeNodes(e.currentNodes)},i={Enter:o=>{o.shiftKey?e.insertSibling("before"):o.ctrlKey?e.insertParent():e.insertSibling("after")},Tab:()=>{e.addChild()},F1:()=>{e.toCenter()},F2:()=>{e.beginEdit()},ArrowUp:o=>{if(o.altKey)e.moveUpNode();else{if(o.metaKey||o.ctrlKey)return e.initSide();Se(e,"previous")}},ArrowDown:o=>{o.altKey?e.moveDownNode():Se(e,"next")},ArrowLeft:o=>{if(o.metaKey||o.ctrlKey)return e.initLeft();Ce(e,j.LHS)},ArrowRight:o=>{if(o.metaKey||o.ctrlKey)return e.initRight();Ce(e,j.RHS)},PageUp:()=>e.moveUpNode(),PageDown:()=>{e.moveDownNode()},c:o=>{(o.metaKey||o.ctrlKey)&&(e.currentNode?e.waitCopy=[e.currentNode]:e.currentNodes&&(e.waitCopy=e.currentNodes))},x:o=>{(o.metaKey||o.ctrlKey)&&(e.currentNode?e.waitCopy=[e.currentNode]:e.currentNodes&&(e.waitCopy=e.currentNodes),n())},v:o=>{!e.waitCopy||!e.currentNode||(o.metaKey||o.ctrlKey)&&(e.waitCopy.length===1?e.copyNode(e.waitCopy[0],e.currentNode):e.copyNodes(e.waitCopy,e.currentNode))},"+":o=>{(o.metaKey||o.ctrlKey)&&ee(e,"in")},"-":o=>{(o.metaKey||o.ctrlKey)&&ee(e,"out")},0:o=>{(o.metaKey||o.ctrlKey)&&e.scale(1)},Delete:n,Backspace:n,...t};e.map.onkeydown=o=>{if(o.preventDefault(),!e.editable||o.target!==o.currentTarget)return;const r=i[o.key];r&&r(o)},e.map.onwheel=o=>{(o.ctrlKey||o.metaKey)&&(o.preventDefault(),o.deltaY<0?ee(e,"in"):e.scaleVal-e.scaleSensitivity>0&&ee(e,"out"),o.stopPropagation())}}const pe=document,wt=function(e,t){if(!t)return ue(e),e;let n=e.querySelector(".insert-preview");const i=`insert-preview ${t} show`;return n||(n=pe.createElement("div"),e.appendChild(n)),n.className=i,e},ue=function(e){if(!e)return;const t=e.querySelectorAll(".insert-preview");for(const n of t||[])n.remove()},Le=function(e,t){for(const n of t){const i=n.parentElement.parentElement.contains(e);if(!(e&&e.tagName==="ME-TPC"&&e!==n&&!i&&e.nodeObj.parent))return!1}return!0},Mt=function(e){const t=document.createElement("div");return t.className="mind-elixir-ghost",e.map.appendChild(t),t};function Nt(e){let t=null,n=null,i=null;const o=Mt(e),r=12;e.map.addEventListener("dragstart",s=>{var l;const a=s.target;if((a==null?void 0:a.tagName)!=="ME-TPC"){s.preventDefault();return}(l=e.currentNodes)!=null&&l.includes(a)||(e.unselectNodes(),e.selectNode(a)),e.currentNodes?(t=e.currentNodes,o.innerHTML=e.currentNodes.length+""):(t=[a],o.innerHTML=a.innerHTML);for(const c of t)c.parentElement.parentElement.style.opacity="0.5";s.dataTransfer.setDragImage(o,0,0),s.dataTransfer.dropEffect="move",k.clear()}),e.map.addEventListener("dragend",async s=>{if(!t)return;for(const a of t)a.parentElement.parentElement.style.opacity="1";const l=s.target;l.style.opacity="",i&&(ue(i),n==="before"?e.moveNodeBefore(t,i):n==="after"?e.moveNodeAfter(t,i):n==="in"&&e.moveNodeIn(t,i),t=null)}),e.map.addEventListener("dragover",function(s){if(s.preventDefault(),!t)return;ue(i);const l=pe.elementFromPoint(s.clientX,s.clientY-r);if(Le(l,t)){i=l;const a=l.getBoundingClientRect().y;s.clientY>a+l.clientHeight?n="after":n="in"}else{const a=pe.elementFromPoint(s.clientX,s.clientY+r);if(Le(a,t)){i=a;const c=a.getBoundingClientRect().y;s.clientY<c?n="before":n="in"}else n=i=null}i&&wt(i,n)})}const Et=function(e){return["createSummary","removeSummary","finishEditSummary"].includes(e.name)?{type:"summary",value:e.obj.id}:["createArrow","removeArrow","finishEditArrowLabel"].includes(e.name)?{type:"arrow",value:e.obj.id}:["removeNodes","copyNodes","moveNodeBefore","moveNodeAfter","moveNodeIn"].includes(e.name)?{type:"nodes",value:e.objs.map(t=>t.id)}:{type:"node",value:e.obj.id}};function Ct(e){let t=[],n=-1,i=e.getData();e.bus.addListener("operation",o=>{if(o.name==="beginEdit")return;t=t.slice(0,n+1);const r=e.getData();t.push({prev:i,currentObject:Et(o),next:r}),i=r,n=t.length-1}),e.undo=function(){if(n>-1){const o=t[n];i=o.prev,e.refresh(o.prev);try{o.currentObject.type==="node"?e.selectNode(E(o.currentObject.value)):o.currentObject.type==="nodes"&&e.selectNodes(o.currentObject.value.map(r=>E(r)))}catch{}finally{n--}}},e.redo=function(){if(n<t.length-1){n++;const o=t[n];i=o.next,e.refresh(o.next),o.currentObject.type==="node"?e.selectNode(E(o.currentObject.value)):o.currentObject.type==="nodes"&&e.selectNodes(o.currentObject.value.map(r=>E(r)))}},e.map.addEventListener("keydown",o=>{(o.metaKey||o.ctrlKey)&&(o.shiftKey&&o.key==="Z"||o.key==="y")?e.redo():(o.metaKey||o.ctrlKey)&&o.key==="z"&&e.undo()})}const R=(e,t)=>{const n=document.createElement("span");return n.id=e,n.innerHTML=`<svg class="icon" aria-hidden="true">
    <use xlink:href="#icon-${t}"></use>
  </svg>`,n};function St(e){const t=document.createElement("div"),n=R("fullscreen","full"),i=R("toCenter","living"),o=R("zoomout","move"),r=R("zoomin","add"),s=document.createElement("span");return s.innerText="100%",t.appendChild(n),t.appendChild(i),t.appendChild(o),t.appendChild(r),t.className="mind-elixir-toolbar rb",n.onclick=()=>{document.fullscreenElement===e.el?document.exitFullscreen():e.el.requestFullscreen()},i.onclick=()=>{e.toCenter()},o.onclick=()=>{e.scaleVal<.6||e.scale(e.scaleVal-e.scaleSensitivity)},r.onclick=()=>{e.scaleVal>1.6||e.scale(e.scaleVal+e.scaleSensitivity)},t}function Lt(e){const t=document.createElement("div"),n=R("tbltl","left"),i=R("tbltr","right"),o=R("tblts","side");return t.appendChild(n),t.appendChild(i),t.appendChild(o),t.className="mind-elixir-toolbar lt",n.onclick=()=>{e.initLeft()},i.onclick=()=>{e.initRight()},o.onclick=()=>{e.initSide()},t}function jt(e){e.container.append(St(e)),e.container.append(Lt(e))}/*! @viselect/vanilla v3.5.1 MIT | https://github.com/Simonwep/selection/tree/master/packages/vanilla */var kt=Object.defineProperty,_t=(e,t,n)=>t in e?kt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,M=(e,t,n)=>(_t(e,typeof t!="symbol"?t+"":t,n),n);class zt{constructor(){M(this,"_listeners",new Map),M(this,"on",this.addEventListener),M(this,"off",this.removeEventListener),M(this,"emit",this.dispatchEvent)}addEventListener(t,n){const i=this._listeners.get(t)??new Set;return this._listeners.set(t,i),i.add(n),this}removeEventListener(t,n){var i;return(i=this._listeners.get(t))==null||i.delete(n),this}dispatchEvent(t,...n){let i=!0;for(const o of this._listeners.get(t)??[])i=o(...n)!==!1&&i;return i}unbindAllListeners(){this._listeners.clear()}}const je=(e,t="px")=>typeof e=="number"?e+t:e;function H({style:e},t,n){if(typeof t=="object")for(const[i,o]of Object.entries(t))o!==void 0&&(e[i]=je(o));else n!==void 0&&(e[t]=je(n))}const Fe=e=>(t,n,i,o={})=>{t instanceof HTMLCollection||t instanceof NodeList?t=Array.from(t):Array.isArray(t)||(t=[t]),Array.isArray(n)||(n=[n]);for(const r of t)if(r)for(const s of n)r[e](s,i,{capture:!1,...o});return[t,n,i,o]},Y=Fe("addEventListener"),I=Fe("removeEventListener"),te=e=>{var t;const{clientX:n,clientY:i,target:o}=((t=e.touches)==null?void 0:t[0])??e;return{x:n,y:i,target:o}};function ke(e,t,n="touch"){switch(n){case"center":{const i=t.left+t.width/2,o=t.top+t.height/2;return i>=e.left&&i<=e.right&&o>=e.top&&o<=e.bottom}case"cover":return t.left>=e.left&&t.top>=e.top&&t.right<=e.right&&t.bottom<=e.bottom;case"touch":return e.right>=t.left&&e.left<=t.right&&e.bottom>=t.top&&e.top<=t.bottom}}function F(e,t=document){const n=Array.isArray(e)?e:[e];let i=[];for(let o=0,r=n.length;o<r;o++){const s=n[o];typeof s=="string"?i=i.concat(Array.from(t.querySelectorAll(s))):s instanceof Element&&i.push(s)}return i}const Tt=()=>matchMedia("(hover: none), (pointer: coarse)").matches,At=()=>"safari"in window,Dt=e=>{let t,n=-1,i=!1;return{next(...o){t=o,i||(i=!0,n=requestAnimationFrame(()=>{e(...t),i=!1}))},cancel(){cancelAnimationFrame(n),i=!1}}};function Ht(e,t){for(const n of t){if(typeof n=="number")return e.button===n;if(typeof n=="object"){const i=n.button===e.button,o=n.modifiers.every(r=>{switch(r){case"alt":return e.altKey;case"ctrl":return e.ctrlKey||e.metaKey;case"shift":return e.shiftKey}});return i&&o}}return!1}const{abs:B,max:_e,min:ze,ceil:Te}=Math;class We extends zt{constructor(t){var n,i,o,r,s;super(),M(this,"_options"),M(this,"_selection",{stored:[],selected:[],touched:[],changed:{added:[],removed:[]}}),M(this,"_area"),M(this,"_clippingElement"),M(this,"_targetElement"),M(this,"_targetRect"),M(this,"_selectables",[]),M(this,"_latestElement"),M(this,"_areaRect",new DOMRect),M(this,"_areaLocation",{y1:0,x2:0,y2:0,x1:0}),M(this,"_singleClick",!0),M(this,"_frame"),M(this,"_scrollAvailable",!0),M(this,"_scrollingActive",!1),M(this,"_scrollSpeed",{x:0,y:0}),M(this,"_scrollDelta",{x:0,y:0}),M(this,"disable",this._bindStartEvents.bind(this,!1)),M(this,"enable",this._bindStartEvents),this._options={selectionAreaClass:"selection-area",selectionContainerClass:void 0,selectables:[],document:window.document,startAreas:["html"],boundaries:["html"],container:"body",...t,behaviour:{overlap:"invert",intersect:"touch",triggers:[0],...t.behaviour,startThreshold:(n=t.behaviour)!=null&&n.startThreshold?typeof t.behaviour.startThreshold=="number"?t.behaviour.startThreshold:{x:10,y:10,...t.behaviour.startThreshold}:{x:10,y:10},scrolling:{speedDivider:10,manualSpeed:750,...(i=t.behaviour)==null?void 0:i.scrolling,startScrollMargins:{x:0,y:0,...(r=(o=t.behaviour)==null?void 0:o.scrolling)==null?void 0:r.startScrollMargins}}},features:{range:!0,touch:!0,...t.features,singleTap:{allow:!0,intersect:"native",...(s=t.features)==null?void 0:s.singleTap}}};for(const d of Object.getOwnPropertyNames(Object.getPrototypeOf(this)))typeof this[d]=="function"&&(this[d]=this[d].bind(this));const{document:l,selectionAreaClass:a,selectionContainerClass:c}=this._options;this._area=l.createElement("div"),this._clippingElement=l.createElement("div"),this._clippingElement.appendChild(this._area),this._area.classList.add(a),c&&this._clippingElement.classList.add(c),H(this._area,{willChange:"top, left, bottom, right, width, height",top:0,left:0,position:"fixed"}),H(this._clippingElement,{overflow:"hidden",position:"fixed",transform:"translate3d(0, 0, 0)",pointerEvents:"none",zIndex:"1"}),this._frame=Dt(d=>{this._recalculateSelectionAreaRect(),this._updateElementSelection(),this._emitEvent("move",d),this._redrawSelectionArea()}),this.enable()}_bindStartEvents(t=!0){const{document:n,features:i}=this._options,o=t?Y:I;o(n,"mousedown",this._onTapStart),i.touch&&o(n,"touchstart",this._onTapStart,{passive:!1})}_onTapStart(t,n=!1){const{x:i,y:o,target:r}=te(t),{_options:s}=this,{document:l}=this._options,a=r.getBoundingClientRect();if(t instanceof MouseEvent&&!Ht(t,s.behaviour.triggers))return;const c=F(s.startAreas,s.document),d=F(s.boundaries,s.document);this._targetElement=d.find(m=>ke(m.getBoundingClientRect(),a));const p=t.composedPath();if(!this._targetElement||!c.find(m=>p.includes(m))||!d.find(m=>p.includes(m))||!n&&this._emitEvent("beforestart",t)===!1)return;this._areaLocation={x1:i,y1:o,x2:0,y2:0};const h=l.scrollingElement??l.body;this._scrollDelta={x:h.scrollLeft,y:h.scrollTop},this._singleClick=!0,this.clearSelection(!1,!0),Y(l,["touchmove","mousemove"],this._delayedTapMove,{passive:!1}),Y(l,["mouseup","touchcancel","touchend"],this._onTapStop),Y(l,"scroll",this._onScroll)}_onSingleTap(t){const{singleTap:{intersect:n},range:i}=this._options.features,o=te(t);let r;if(n==="native")r=o.target;else if(n==="touch"){this.resolveSelectables();const{x:l,y:a}=o;r=this._selectables.find(c=>{const{right:d,left:p,top:h,bottom:m}=c.getBoundingClientRect();return l<d&&l>p&&a<m&&a>h})}if(!r)return;for(this.resolveSelectables();!this._selectables.includes(r);){if(!r.parentElement)return;r=r.parentElement}const{stored:s}=this._selection;if(this._emitEvent("start",t),t.shiftKey&&i&&this._latestElement){const l=this._latestElement,[a,c]=l.compareDocumentPosition(r)&4?[r,l]:[l,r],d=[...this._selectables.filter(p=>p.compareDocumentPosition(a)&4&&p.compareDocumentPosition(c)&2),a,c];this.select(d),this._latestElement=l}else s.includes(r)&&(s.length===1||t.ctrlKey||s.every(l=>this._selection.stored.includes(l)))?this.deselect(r):(this.select(r),this._latestElement=r)}_delayedTapMove(t){const{container:n,document:i,behaviour:{startThreshold:o}}=this._options,{x1:r,y1:s}=this._areaLocation,{x:l,y:a}=te(t);if(typeof o=="number"&&B(l+a-(r+s))>=o||typeof o=="object"&&B(l-r)>=o.x||B(a-s)>=o.y){if(I(i,["mousemove","touchmove"],this._delayedTapMove,{passive:!1}),this._emitEvent("beforedrag",t)===!1){I(i,["mouseup","touchcancel","touchend"],this._onTapStop);return}Y(i,["mousemove","touchmove"],this._onTapMove,{passive:!1}),H(this._area,"display","block"),F(n,i)[0].appendChild(this._clippingElement),this.resolveSelectables(),this._singleClick=!1,this._targetRect=this._targetElement.getBoundingClientRect(),this._scrollAvailable=this._targetElement.scrollHeight!==this._targetElement.clientHeight||this._targetElement.scrollWidth!==this._targetElement.clientWidth,this._scrollAvailable&&(Y(this._targetElement,"wheel",this._manualScroll,{passive:!1}),this._selectables=this._selectables.filter(c=>this._targetElement.contains(c))),this._setupSelectionArea(),this._emitEvent("start",t),this._onTapMove(t)}this._handleMoveEvent(t)}_setupSelectionArea(){const{_clippingElement:t,_targetElement:n,_area:i}=this,o=this._targetRect=n.getBoundingClientRect();this._scrollAvailable?(H(t,{top:o.top,left:o.left,width:o.width,height:o.height}),H(i,{marginTop:-o.top,marginLeft:-o.left})):(H(t,{top:0,left:0,width:"100%",height:"100%"}),H(i,{marginTop:0,marginLeft:0}))}_onTapMove(t){const{x:n,y:i}=te(t),{_scrollSpeed:o,_areaLocation:r,_options:s,_frame:l}=this,{speedDivider:a}=s.behaviour.scrolling,c=this._targetElement;if(r.x2=n,r.y2=i,this._scrollAvailable&&!this._scrollingActive&&(o.y||o.x)){this._scrollingActive=!0;const d=()=>{if(!o.x&&!o.y){this._scrollingActive=!1;return}const{scrollTop:p,scrollLeft:h}=c;o.y&&(c.scrollTop+=Te(o.y/a),r.y1-=c.scrollTop-p),o.x&&(c.scrollLeft+=Te(o.x/a),r.x1-=c.scrollLeft-h),l.next(t),requestAnimationFrame(d)};requestAnimationFrame(d)}else l.next(t);this._handleMoveEvent(t)}_handleMoveEvent(t){const{features:n}=this._options;(n.touch&&Tt()||this._scrollAvailable&&At())&&t.preventDefault()}_onScroll(){const{_scrollDelta:t,_options:{document:n}}=this,{scrollTop:i,scrollLeft:o}=n.scrollingElement??n.body;this._areaLocation.x1+=t.x-o,this._areaLocation.y1+=t.y-i,t.x=o,t.y=i,this._setupSelectionArea(),this._frame.next(null)}_manualScroll(t){const{manualSpeed:n}=this._options.behaviour.scrolling,i=t.deltaY?t.deltaY>0?1:-1:0,o=t.deltaX?t.deltaX>0?1:-1:0;this._scrollSpeed.y+=i*n,this._scrollSpeed.x+=o*n,this._onTapMove(t),t.preventDefault()}_recalculateSelectionAreaRect(){const{_scrollSpeed:t,_areaLocation:n,_areaRect:i,_targetElement:o,_options:r}=this,{scrollTop:s,scrollHeight:l,clientHeight:a,scrollLeft:c,scrollWidth:d,clientWidth:p}=o,h=this._targetRect,{x1:m,y1:f}=n;let{x2:v,y2:g}=n;const{behaviour:{scrolling:{startScrollMargins:u}}}=r;v<h.left+u.x?(t.x=c?-B(h.left-v+u.x):0,v=v<h.left?h.left:v):v>h.right-u.x?(t.x=d-c-p?B(h.left+h.width-v-u.x):0,v=v>h.right?h.right:v):t.x=0,g<h.top+u.y?(t.y=s?-B(h.top-g+u.y):0,g=g<h.top?h.top:g):g>h.bottom-u.y?(t.y=l-s-a?B(h.top+h.height-g-u.y):0,g=g>h.bottom?h.bottom:g):t.y=0;const b=ze(m,v),x=ze(f,g),C=_e(m,v),y=_e(f,g);i.x=b,i.y=x,i.width=C-b,i.height=y-x}_redrawSelectionArea(){const{x:t,y:n,width:i,height:o}=this._areaRect,{style:r}=this._area;r.left=`${t}px`,r.top=`${n}px`,r.width=`${i}px`,r.height=`${o}px`}_onTapStop(t,n){var i;const{document:o,features:r}=this._options,{_singleClick:s}=this;I(o,["mousemove","touchmove"],this._delayedTapMove),I(o,["touchmove","mousemove"],this._onTapMove),I(o,["mouseup","touchcancel","touchend"],this._onTapStop),I(o,"scroll",this._onScroll),this._keepSelection(),t&&s&&r.singleTap.allow?this._onSingleTap(t):!s&&!n&&(this._updateElementSelection(),this._emitEvent("stop",t)),this._scrollSpeed.x=0,this._scrollSpeed.y=0,I(this._targetElement,"wheel",this._manualScroll,{passive:!0}),this._clippingElement.remove(),(i=this._frame)==null||i.cancel(),H(this._area,"display","none")}_updateElementSelection(){const{_selectables:t,_options:n,_selection:i,_areaRect:o}=this,{stored:r,selected:s,touched:l}=i,{intersect:a,overlap:c}=n.behaviour,d=c==="invert",p=[],h=[],m=[];for(let v=0;v<t.length;v++){const g=t[v];if(ke(o,g.getBoundingClientRect(),a)){if(s.includes(g))r.includes(g)&&!l.includes(g)&&l.push(g);else if(d&&r.includes(g)){m.push(g);continue}else h.push(g);p.push(g)}}d&&h.push(...r.filter(v=>!s.includes(v)));const f=c==="keep";for(let v=0;v<s.length;v++){const g=s[v];!p.includes(g)&&!(f&&r.includes(g))&&m.push(g)}i.selected=p,i.changed={added:h,removed:m},this._latestElement=void 0}_emitEvent(t,n){return this.emit(t,{event:n,store:this._selection,selection:this})}_keepSelection(){const{_options:t,_selection:n}=this,{selected:i,changed:o,touched:r,stored:s}=n,l=i.filter(a=>!s.includes(a));switch(t.behaviour.overlap){case"drop":{n.stored=[...l,...s.filter(a=>!r.includes(a))];break}case"invert":{n.stored=[...l,...s.filter(a=>!o.removed.includes(a))];break}case"keep":{n.stored=[...s,...i.filter(a=>!s.includes(a))];break}}}trigger(t,n=!0){this._onTapStart(t,n)}resolveSelectables(){this._selectables=F(this._options.selectables,this._options.document)}clearSelection(t=!0,n=!1){const{selected:i,stored:o,changed:r}=this._selection;r.added=[],r.removed.push(...i,...t?o:[]),n||(this._emitEvent("move",null),this._emitEvent("stop",null)),this._selection={stored:t?[]:o,selected:[],touched:[],changed:{added:[],removed:[]}}}getSelection(){return this._selection.stored}getSelectionArea(){return this._area}cancel(t=!1){this._onTapStop(null,!t)}destroy(){this.cancel(),this.disable(),this._clippingElement.remove(),super.unbindAllListeners()}select(t,n=!1){const{changed:i,selected:o,stored:r}=this._selection,s=F(t,this._options.document).filter(l=>!o.includes(l)&&!r.includes(l));return r.push(...s),o.push(...s),i.added.push(...s),i.removed=[],this._latestElement=void 0,n||(this._emitEvent("move",null),this._emitEvent("stop",null)),s}deselect(t,n=!1){const{selected:i,stored:o,changed:r}=this._selection,s=F(t,this._options.document).filter(l=>i.includes(l)||o.includes(l));s.length&&(this._selection.stored=o.filter(l=>!s.includes(l)),this._selection.selected=i.filter(l=>!s.includes(l)),this._selection.changed.added=[],this._selection.changed.removed.push(...s.filter(l=>!r.removed.includes(l))),this._latestElement=void 0,n||(this._emitEvent("move",null),this._emitEvent("stop",null)))}}M(We,"version","3.5.1");function It(e){const t=e.mouseSelectionButton===2?[2]:[0],n=new We({selectables:[".map-container me-tpc"],boundaries:[e.container],container:e.selectionContainer,behaviour:{triggers:t,scrolling:{speedDivider:10,manualSpeed:750,startScrollMargins:{x:10,y:10}}}}).on("beforestart",({event:i})=>{if(i.target.tagName==="ME-TPC"||i.target.id==="input-box"||i.target.className==="circle")return!1;const o=n.getSelectionArea();return o.style.background="#4f90f22d",o.style.border="1px solid #4f90f2",o.parentElement&&(o.parentElement.style.zIndex="9999"),!0}).on("start",({event:i})=>{!i.ctrlKey&&!i.metaKey&&(e.clearSelection(),n.clearSelection(!0,!0))}).on("move",({store:{changed:{added:i,removed:o}}})=>{k.moved=!0;for(const r of i)r.classList.add("selected");for(const r of o)r.classList.remove("selected")}).on("stop",({store:{stored:i}})=>{e.selectNodes(i)});e.selection=n}const Ot=function(e,t=!0){this.theme=e;const n=this.theme.cssVar,i=Object.keys(n);this.container.style.cssText="";for(let o=0;o<i.length;o++){const r=i[o];this.container.style.setProperty(r,n[r])}e.cssVar["--gap"]||this.container.style.setProperty("--gap","30px"),t&&this.refresh()},K=e=>{var t;const n=(t=e.parent)==null?void 0:t.children,i=(n==null?void 0:n.indexOf(e))??0;return{siblings:n,index:i}};function $t(e){const{siblings:t,index:n}=K(e);if(t===void 0)return;const i=t[n];n===0?(t[n]=t[t.length-1],t[t.length-1]=i):(t[n]=t[n-1],t[n-1]=i)}function Pt(e){const{siblings:t,index:n}=K(e);if(t===void 0)return;const i=t[n];n===t.length-1?(t[n]=t[0],t[0]=i):(t[n]=t[n+1],t[n+1]=i)}function be(e){const{siblings:t,index:n}=K(e);return t===void 0?0:(t.splice(n,1),t.length)}function Bt(e,t,n){const{siblings:i,index:o}=K(n);i!==void 0&&(t==="before"?i.splice(o,0,e):i.splice(o+1,0,e))}function Rt(e,t){const{siblings:n,index:i}=K(e);n!==void 0&&(n[i]=t,t.children=[e])}function Ve(e,t,n){var i;if(be(t),(i=n.parent)!=null&&i.parent||(t.direction=n.direction),e==="in")n.children?n.children.push(t):n.children=[t];else{t.direction!==void 0&&(t.direction=n.direction);const{siblings:o,index:r}=K(n);if(o===void 0)return;e==="before"?o.splice(r,0,t):o.splice(r+1,0,t)}}const Yt=function({map:e,direction:t},n){var i,o;if(t===T)return T;if(t===O)return O;if(t===ce){const r=((i=e.querySelector(".lhs"))==null?void 0:i.childElementCount)||0,s=((o=e.querySelector(".rhs"))==null?void 0:o.childElementCount)||0;return r<=s?(n.direction=T,T):(n.direction=O,O)}},qe=function(e,t,n){var i,o;const r=n.children[0].children[0],s=t.parentElement;if(s.tagName==="ME-PARENT"){if(Q(r),s.children[1])s.nextSibling.appendChild(n);else{const l=e.createChildren([n]);s.appendChild(ve(!0)),s.insertAdjacentElement("afterend",l)}e.linkDiv(n.offsetParent)}else s.tagName==="ME-ROOT"&&(Yt(e,r.nodeObj)===T?(i=e.container.querySelector(".lhs"))==null||i.appendChild(n):(o=e.container.querySelector(".rhs"))==null||o.appendChild(n),e.linkDiv())},Ke=function(e,t){const n=e.parentNode;if(t===0){const i=n.parentNode.parentNode;i.tagName!=="ME-MAIN"&&(i.previousSibling.children[1].remove(),i.remove())}n.parentNode.remove()},Ue={before:"beforebegin",after:"afterend"},Q=function(e){const t=e.parentElement.parentElement.lastElementChild;(t==null?void 0:t.tagName)==="svg"&&(t==null||t.remove())},Ft=function(e,t){const n=e.nodeObj,i=fe(n);i.style&&t.style&&(t.style=Object.assign(i.style,t.style));const o=Object.assign(n,t);ge(e,o),this.linkDiv(),this.bus.fire("operation",{name:"reshapeNode",obj:o,origin:i})},ye=function(e,t,n){if(!t)return null;const i=t.nodeObj;i.expanded===!1&&(e.expandNode(t,!0),t=E(i.id));const o=n||e.generateNewObj();i.children?i.children.push(o):i.children=[o],$(e.nodeData);const{grp:r,top:s}=e.createWrapper(o);return qe(e,t,r),{newTop:s,newNodeObj:o}},Wt=function(e,t,n){var i,o,r,s;const l=t||this.currentNode;if(!l)return;const a=l.nodeObj;if(a.parent){if(!((i=a.parent)!=null&&i.parent)&&((r=(o=a.parent)==null?void 0:o.children)==null?void 0:r.length)===1&&this.direction===2){this.addChild(E(a.parent.id),n);return}}else{this.addChild();return}const c=n||this.generateNewObj();if(!((s=a.parent)!=null&&s.parent)){const m=l.closest("me-main").className===j.LHS?T:O;c.direction=m}Bt(c,e,a),$(this.nodeData);const d=l.parentElement,{grp:p,top:h}=this.createWrapper(c);d.parentElement.insertAdjacentElement(Ue[e],p),this.linkDiv(p.offsetParent),n||this.editTopic(h.firstChild),this.selectNode(h.firstChild,!0),this.bus.fire("operation",{name:"insertSibling",type:e,obj:c})},Vt=function(e,t){const n=e||this.currentNode;if(!n)return;Q(n);const i=n.nodeObj;if(!i.parent)return;const o=t||this.generateNewObj();Rt(i,o),$(this.nodeData);const r=n.parentElement.parentElement,{grp:s,top:l}=this.createWrapper(o,!0);l.appendChild(ve(!0)),r.insertAdjacentElement("afterend",s);const a=this.createChildren([r]);l.insertAdjacentElement("afterend",a),this.linkDiv(),t||this.editTopic(l.firstChild),this.selectNode(l.firstChild,!0),this.bus.fire("operation",{name:"insertParent",obj:o})},qt=function(e,t){const n=e||this.currentNode;if(!n)return;const i=ye(this,n,t);if(!i)return;const{newTop:o,newNodeObj:r}=i;this.bus.fire("operation",{name:"addChild",obj:r}),t||this.editTopic(o.firstChild),this.selectNode(o.firstChild,!0)},Kt=function(e,t){const n=fe(e.nodeObj);me(n);const i=ye(this,t,n);if(!i)return;const{newNodeObj:o}=i;this.selectNode(E(o.id)),this.bus.fire("operation",{name:"copyNode",obj:o})},Ut=function(e,t){e=de(e);const n=[];for(let i=0;i<e.length;i++){const o=e[i],r=fe(o.nodeObj);me(r);const s=ye(this,t,r);if(!s)return;const{newNodeObj:l}=s;n.push(l)}this.selectNodes(n.map(i=>E(i.id))),this.bus.fire("operation",{name:"copyNodes",objs:n})},Zt=function(e){const t=e||this.currentNode;if(!t)return;const n=t.nodeObj;$t(n);const i=t.parentNode.parentNode;i.parentNode.insertBefore(i,i.previousSibling),this.linkDiv(),this.bus.fire("operation",{name:"moveUpNode",obj:n})},Jt=function(e){const t=e||this.currentNode;if(!t)return;const n=t.nodeObj;Pt(n);const i=t.parentNode.parentNode;i.nextSibling?i.nextSibling.insertAdjacentElement("afterend",i):i.parentNode.prepend(i),this.linkDiv(),this.bus.fire("operation",{name:"moveDownNode",obj:n})},Gt=function(e){var t;const n=e||this.currentNode;if(!n)return;const i=n.nodeObj;if(!i.parent)throw new Error("Can not remove root node");const o=i.parent.children,r=o.findIndex(l=>l===i),s=be(i);if(Ke(n,s),o.length!==0){const l=o[r]||o[r-1];this.selectNode(E(l.id))}else this.selectNode(E(i.parent.id));this.linkDiv(),this.bus.fire("operation",{name:"removeNode",obj:i,originIndex:r,originParentId:(t=i==null?void 0:i.parent)==null?void 0:t.id})},Xt=function(e){e=de(e);for(const t of e){const n=t.nodeObj;if(!n.parent)continue;const i=be(n);Ke(t,i)}this.linkDiv(),this.bus.fire("operation",{name:"removeNodes",objs:e.map(t=>t.nodeObj)})},Qt=function(e,t){e=de(e);const n=t.nodeObj;n.expanded===!1&&(this.expandNode(t,!0),t=E(n.id));for(const i of e){const o=i.nodeObj;Ve("in",o,n),$(this.nodeData);const r=i.parentElement;qe(this,t,r.parentElement)}this.linkDiv(),this.bus.fire("operation",{name:"moveNodeIn",objs:e.map(i=>i.nodeObj),toObj:n})},Ze=(e,t,n,i)=>{e=de(e),t==="after"&&(e=e.reverse());const o=n.nodeObj,r=[];for(const s of e){const l=s.nodeObj;Ve(t,l,o),$(i.nodeData),Q(s);const a=s.parentElement.parentNode;r.includes(a.parentElement)||r.push(a.parentElement),n.parentElement.parentNode.insertAdjacentElement(Ue[t],a)}for(const s of r)s.childElementCount===0&&s.tagName!=="ME-MAIN"&&(s.previousSibling.children[1].remove(),s.remove());i.linkDiv(),i.bus.fire("operation",{name:t==="before"?"moveNodeBefore":"moveNodeAfter",objs:e.map(s=>s.nodeObj),toObj:o})},en=function(e,t){Ze(e,"before",t,this)},tn=function(e,t){Ze(e,"after",t,this)},nn=function(e){const t=e||this.currentNode;t&&(t.nodeObj.dangerouslySetInnerHTML||this.editTopic(t))},on=function(e,t){e.text.textContent=t,e.nodeObj.topic=t,this.linkDiv()},Je=Object.freeze(Object.defineProperty({__proto__:null,addChild:qt,beginEdit:nn,copyNode:Kt,copyNodes:Ut,insertParent:Vt,insertSibling:Wt,moveDownNode:Jt,moveNodeAfter:tn,moveNodeBefore:en,moveNodeIn:Qt,moveUpNode:Zt,removeNode:Gt,removeNodes:Xt,reshapeNode:Ft,rmSubline:Q,setNodeTopic:on},Symbol.toStringTag,{value:"Module"}));function Ge(e){return{nodeData:e.isFocusMode?e.nodeDataBackup:e.nodeData,arrows:e.arrows,summaries:e.summaries,direction:e.direction,theme:e.theme}}const rn=function(e,t,n){if(e){if(this.clearSelection(),typeof e=="string"){const i=E(e);return i?this.selectNode(i):void 0}e.className="selected",e.scrollIntoView({block:"nearest",inline:"nearest"}),this.currentNode=e,t?this.bus.fire("selectNewNode",e.nodeObj):this.bus.fire("selectNode",e.nodeObj,n)}},sn=function(){this.currentNode&&(this.currentNode.className=""),this.currentNode=null,this.bus.fire("unselectNode")},ln=function(e){this.clearSelection();for(const t of e)t.className="selected";this.currentNodes=e,this.bus.fire("selectNodes",e.map(t=>t.nodeObj))},an=function(){if(this.currentNodes)for(const e of this.currentNodes)e.classList.remove("selected");this.currentNodes=null,this.bus.fire("unselectNodes")},cn=function(){this.unselectNode(),this.unselectNodes(),this.unselectSummary(),this.unselectArrow()},dn=function(){const e=Ge(this);return JSON.stringify(e,(t,n)=>{if(!(t==="parent"&&typeof n!="string"))return n})},hn=function(){return JSON.parse(this.getDataString())},pn=function(){const e=Ge(this).nodeData;let t="# "+e.topic+`

`;function n(i,o){for(let r=0;r<i.length;r++)o<=6?t+="".padStart(o,"#")+" "+i[r].topic+`

`:t+="".padStart(o-7,"	")+"- "+i[r].topic+`
`,i[r].children&&n(i[r].children||[],o+1)}return n(e.children||[],2),t},un=function(){this.editable=!0},mn=function(){this.editable=!1},fn=function(e){this.scaleVal=e,this.map.style.transform="scale("+e+")",this.bus.fire("scale",e)},gn=function(){const e=this.nodes.offsetHeight/this.container.offsetHeight,t=this.nodes.offsetWidth/this.container.offsetWidth,n=1/Math.max(1,Math.max(e,t));this.scaleVal=n,this.map.style.transform="scale("+n+")",this.bus.fire("scale",n)},vn=function(){this.container.scrollTo(1e4-this.container.offsetWidth/2,1e4-this.container.offsetHeight/2)},bn=function(e){e(this)},yn=function(e){e.nodeObj.parent&&(this.tempDirection===null&&(this.tempDirection=this.direction),this.isFocusMode||(this.nodeDataBackup=this.nodeData,this.isFocusMode=!0),this.nodeData=e.nodeObj,this.initRight(),this.toCenter())},xn=function(){this.isFocusMode=!1,this.tempDirection!==null&&(this.nodeData=this.nodeDataBackup,this.direction=this.tempDirection,this.tempDirection=null,this.refresh(),this.toCenter())},wn=function(){this.direction=0,this.refresh()},Mn=function(){this.direction=1,this.refresh()},Nn=function(){this.direction=2,this.refresh()},En=function(e){this.locale=e,this.refresh()},Cn=function(e,t){const n=e.nodeObj;typeof t=="boolean"?n.expanded=t:n.expanded!==!1?n.expanded=!1:n.expanded=!0;const i=e.parentNode,o=i.children[1];if(o.expanded=n.expanded,o.className=n.expanded?"minus":"",Q(e),n.expanded){const l=this.createChildren(n.children.map(a=>this.createWrapper(a).grp));i.parentNode.appendChild(l)}else i.parentNode.children[1].remove();this.linkDiv(e.closest("me-main > me-wrapper"));const r=e.getBoundingClientRect(),s=this.container.getBoundingClientRect();(r.bottom>s.bottom||r.top<s.top||r.right>s.right||r.left<s.left)&&e.scrollIntoView({block:"center",inline:"center"}),this.bus.fire("expandNode",n)},Sn=function(e){e&&(e=JSON.parse(JSON.stringify(e)),this.nodeData=e.nodeData,this.arrows=e.arrows||[],this.summaries=e.summaries||[]),$(this.nodeData),this.layout(),this.linkDiv()},Ln=Object.freeze(Object.defineProperty({__proto__:null,cancelFocus:xn,clearSelection:cn,disableEdit:mn,enableEdit:un,expandNode:Cn,focusNode:yn,getData:hn,getDataMd:pn,getDataString:dn,initLeft:wn,initRight:Mn,initSide:Nn,install:bn,refresh:Sn,scale:fn,scaleFit:gn,selectNode:rn,selectNodes:ln,setLocale:En,toCenter:vn,unselectNode:sn,unselectNodes:an},Symbol.toStringTag,{value:"Module"})),jn=function(e){return{dom:e,moved:!1,mousedown:!1,handleMouseMove(t){this.mousedown&&(this.moved=!0,this.cb&&this.cb(t.movementX,t.movementY))},handleMouseDown(t){t.button===0&&(this.mousedown=!0)},handleClear(t){this.mousedown=!1},cb:null,init(t,n){this.cb=n,this.handleClear=this.handleClear.bind(this),this.handleMouseMove=this.handleMouseMove.bind(this),this.handleMouseDown=this.handleMouseDown.bind(this),t.addEventListener("mousemove",this.handleMouseMove),t.addEventListener("mouseleave",this.handleClear),t.addEventListener("mouseup",this.handleClear),this.dom.addEventListener("mousedown",this.handleMouseDown)},destory(t){t.removeEventListener("mousemove",this.handleMouseMove),t.removeEventListener("mouseleave",this.handleClear),t.removeEventListener("mouseup",this.handleClear),this.dom.removeEventListener("mousedown",this.handleMouseDown)},clear(){this.moved=!1,this.mousedown=!1}}},Ae={create:jn};function ae(e,t,n){const{offsetLeft:i,offsetTop:o}=P(e.nodes,t),r=t.offsetWidth,s=t.offsetHeight,l=i+r/2,a=o+s/2,c=l+n.x,d=a+n.y;return{w:r,h:s,cx:l,cy:a,ctrlX:c,ctrlY:d}}function W(e){let t,n;const i=(e.cy-e.ctrlY)/(e.ctrlX-e.cx);return i>e.h/e.w||i<-e.h/e.w?e.cy-e.ctrlY<0?(t=e.cx-e.h/2/i,n=e.cy+e.h/2):(t=e.cx+e.h/2/i,n=e.cy-e.h/2):e.cx-e.ctrlX<0?(t=e.cx+e.w/2,n=e.cy-e.w*i/2):(t=e.cx-e.w/2,n=e.cy+e.w*i/2),{x:t,y:n}}const kn=function(e,t,n,i){const o=document.createElementNS("http://www.w3.org/2000/svg","text");return N(o,{"text-anchor":"middle",x:t+"",y:n+"",fill:i||"#666"}),o.dataset.type="custom-link",o.innerHTML=e,o},Xe=function(e,t,n,i,o){if(!t||!n)return;performance.now();const r=ae(e,t,i.delta1),s=ae(e,n,i.delta2),{x:l,y:a}=W(r),{ctrlX:c,ctrlY:d}=r,{ctrlX:p,ctrlY:h}=s,{x:m,y:f}=W(s),v=se(p,h,m,f),g=`M ${v.x1} ${v.y1} L ${m} ${f} L ${v.x2} ${v.y2}`;let u="";if(i.bidirectional){const w=se(c,d,l,a);u=`M ${w.x1} ${w.y1} L ${l} ${a} L ${w.x2} ${w.y2}`}const b=pt(`M ${l} ${a} C ${c} ${d} ${p} ${h} ${m} ${f}`,g,u),x=l/8+c*3/8+p*3/8+m/8,C=a/8+d*3/8+h*3/8+f/8,y=kn(i.label,x,C,e.theme.cssVar["--color"]);b.appendChild(y),b.arrowObj=i,b.dataset.linkid=i.id,e.linkSvgGroup.appendChild(b),o||(e.arrows.push(i),e.currentArrow=b,Qe(e,i,r,s)),performance.now()},_n=function(e,t,n={}){const i={id:q(),label:"Custom Link",from:e.nodeObj.id,to:t.nodeObj.id,delta1:{x:0,y:-200},delta2:{x:0,y:-200},...n};Xe(this,e,t,i),this.bus.fire("operation",{name:"createArrow",obj:i})},zn=function(e){let t;if(e?t=e:t=this.currentArrow,!t)return;xe(this);const n=t.arrowObj.id;this.arrows=this.arrows.filter(i=>i.id!==n),t.remove(),this.bus.fire("operation",{name:"removeArrow",obj:{id:n}})},Tn=function(e){this.currentArrow=e;const t=e.arrowObj,n=E(t.from),i=E(t.to),o=ae(this,n,t.delta1),r=ae(this,i,t.delta2);Qe(this,t,o,r)},An=function(){this.currentArrow=null,xe(this)},xe=function(e){var t,n;(t=e.helper1)==null||t.destory(e.map),(n=e.helper2)==null||n.destory(e.map),e.linkController.style.display="none",e.P2.style.display="none",e.P3.style.display="none"},Qe=function(e,t,n,i){e.linkController.style.display="initial",e.P2.style.display="initial",e.P3.style.display="initial",e.nodes.appendChild(e.linkController),e.nodes.appendChild(e.P2),e.nodes.appendChild(e.P3);let{x:o,y:r}=W(n),{ctrlX:s,ctrlY:l}=n,{ctrlX:a,ctrlY:c}=i,{x:d,y:p}=W(i);e.P2.style.cssText=`top:${l}px;left:${s}px;`,e.P3.style.cssText=`top:${c}px;left:${a}px;`,N(e.line1,{x1:o+"",y1:r+"",x2:s+"",y2:l+""}),N(e.line2,{x1:a+"",y1:c+"",x2:d+"",y2:p+""}),e.helper1=Ae.create(e.P2),e.helper2=Ae.create(e.P3),e.helper1.init(e.map,(h,m)=>{if(!e.currentArrow)return;s=s+h/e.scaleVal,l=l+m/e.scaleVal;const f=W({...n,ctrlX:s,ctrlY:l});o=f.x,r=f.y;const v=o/8+s*3/8+a*3/8+d/8,g=r/8+l*3/8+c*3/8+p/8;if(e.P2.style.top=l+"px",e.P2.style.left=s+"px",e.currentArrow.children[0].setAttribute("d",`M ${o} ${r} C ${s} ${l} ${a} ${c} ${d} ${p}`),t.bidirectional){const u=se(s,l,o,r);e.currentArrow.children[2].setAttribute("d",`M ${u.x1} ${u.y1} L ${o} ${r} L ${u.x2} ${u.y2}`)}N(e.currentArrow.children[3],{x:v+"",y:g+""}),N(e.line1,{x1:o+"",y1:r+"",x2:s+"",y2:l+""}),t.delta1.x=s-n.cx,t.delta1.y=l-n.cy,e.bus.fire("updateArrowDelta",t)}),e.helper2.init(e.map,(h,m)=>{if(!e.currentArrow)return;a=a+h/e.scaleVal,c=c+m/e.scaleVal;const f=W({...i,ctrlX:a,ctrlY:c});d=f.x,p=f.y;const v=o/8+s*3/8+a*3/8+d/8,g=r/8+l*3/8+c*3/8+p/8,u=se(a,c,d,p);e.P3.style.top=c+"px",e.P3.style.left=a+"px",e.currentArrow.children[0].setAttribute("d",`M ${o} ${r} C ${s} ${l} ${a} ${c} ${d} ${p}`),e.currentArrow.children[1].setAttribute("d",`M ${u.x1} ${u.y1} L ${d} ${p} L ${u.x2} ${u.y2}`),N(e.currentArrow.children[3],{x:v+"",y:g+""}),N(e.line2,{x1:a+"",y1:c+"",x2:d+"",y2:p+""}),t.delta2.x=a-i.cx,t.delta2.y=c-i.cy,e.bus.fire("updateArrowDelta",t)})};function Dn(){this.linkSvgGroup.innerHTML="";for(let e=0;e<this.arrows.length;e++){const t=this.arrows[e];try{Xe(this,E(t.from),E(t.to),t,!0)}catch{}}this.nodes.appendChild(this.linkSvgGroup)}function Hn(e){if(xe(this),!e)return;const t=e.children[3];Re(this,t,n=>{var i;const o=e.arrowObj,r=((i=n.textContent)==null?void 0:i.trim())||"";r===""?o.label=origin:o.label=r,n.remove(),r!==origin&&(t.innerHTML=o.label,this.linkDiv(),this.bus.fire("operation",{name:"finishEditArrowLabel",obj:o}))})}function In(){this.arrows=this.arrows.filter(e=>re(e.from,this.nodeData)&&re(e.to,this.nodeData))}const On=Object.freeze(Object.defineProperty({__proto__:null,createArrow:_n,editArrowLabel:Hn,removeArrow:zn,renderArrow:Dn,selectArrow:Tn,tidyArrow:In,unselectArrow:An},Symbol.toStringTag,{value:"Module"})),$n=function(e){var t,n;if(e.length===0)throw new Error("No selected node.");if(e.length===1){const d=e[0].nodeObj,p=e[0].nodeObj.parent;if(!p)throw new Error("Can not select root node.");const h=p.children.findIndex(m=>d===m);return{parent:p.id,start:h,end:h}}let i=0;const o=e.map(d=>{let p=d.nodeObj;const h=[];for(;p.parent;){const m=p.parent,f=m.children,v=f==null?void 0:f.indexOf(p);p=m,h.unshift({node:p,index:v})}return h.length>i&&(i=h.length),h});let r=0;e:for(;r<i;r++){const d=(t=o[0][r])==null?void 0:t.node;for(let p=1;p<o.length;p++)if(((n=o[p][r])==null?void 0:n.node)!==d)break e}if(!r)throw new Error("Can not select root node.");const s=o.map(d=>d[r-1].index).sort(),l=s[0]||0,a=s[s.length-1]||0,c=o[0][r-1].node;if(!c.parent)throw new Error("Please select nodes in the same main topic.");return{parent:c.id,start:l,end:a}},Pn=function(e){const t=document.createElementNS("http://www.w3.org/2000/svg","g");return t.setAttribute("id",e),t},De=function(e,t){const n=document.createElementNS("http://www.w3.org/2000/svg","path");return N(n,{d:e,stroke:t||"#666",fill:"none","stroke-linecap":"round","stroke-width":"2"}),n},He=function(e,t,n,i,o){const r=document.createElementNS("http://www.w3.org/2000/svg","text");return N(r,{"text-anchor":i,x:t+"",y:n+"",fill:o||"#666"}),r.innerHTML=e,r},Bn=e=>E(e).parentElement.parentElement,Rn=function({parent:e,start:t}){const n=E(e),i=n.nodeObj;let o;return i.parent?o=n.closest("me-main").className:o=E(i.children[t].id).closest("me-main").className,o},we=function(e,t){var n;const{id:i,text:o,parent:r,start:s,end:l}=t,a=e.nodes,c=E(r).nodeObj,d=Rn(t);let p=1/0,h=0,m=0,f=0;for(let w=s;w<=l;w++){const L=(n=c.children)==null?void 0:n[w];if(!L)return e.removeSummary(i),null;const S=Bn(L.id),{offsetLeft:A,offsetTop:U}=P(a,S),Z=s===l?10:20;w===s&&(m=U+Z),w===l&&(f=U+S.offsetHeight-Z),A<p&&(p=A),S.offsetWidth+A>h&&(h=S.offsetWidth+A)}let v,g;const u=m+10,b=f+10,x=(u+b)/2,C=e.theme.cssVar["--color"];d===j.LHS?(v=De(`M ${p+10} ${u} c -5 0 -10 5 -10 10 L ${p} ${b-10} c 0 5 5 10 10 10 M ${p} ${x} h -10`,C),g=He(o,p-20,x+6,"end",C)):(v=De(`M ${h-10} ${u} c 5 0 10 5 10 10 L ${h} ${b-10} c 0 5 -5 10 -10 10 M ${h} ${x} h 10`,C),g=He(o,h+20,x+6,"start",C));const y=Pn("s-"+i);return y.appendChild(v),y.appendChild(g),y.summaryObj=t,e.summarySvg.appendChild(y),y},Yn=function(){let e=[];this.currentNode?e=[this.currentNode]:this.currentNodes&&(e=this.currentNodes);const{parent:t,start:n,end:i}=$n(e),o={id:q(),parent:t,start:n,end:i,text:"summary"},r=we(this,o);this.summaries.push(o),this.editSummary(r),this.bus.fire("operation",{name:"createSummary",obj:o})},Fn=function(e){const t=q(),n={...e,id:t};we(this,n),this.summaries.push(n),this.bus.fire("operation",{name:"createSummary",obj:n})},Wn=function(e){var t;const n=this.summaries.findIndex(i=>i.id===e);n>-1&&(this.summaries.splice(n,1),(t=document.querySelector("#s-"+e))==null||t.remove()),this.bus.fire("operation",{name:"removeSummary",obj:{id:e}})},Vn=function(e){const t=e.children[1].getBBox(),n=6,i=3,o=document.createElementNS("http://www.w3.org/2000/svg","rect");N(o,{x:t.x-n+"",y:t.y-n+"",width:t.width+n*2+"",height:t.height+n*2+"",rx:i+"",stroke:this.theme.cssVar["--selected"]||"#4dc4ff","stroke-width":"2",fill:"none"}),e.appendChild(o),this.currentSummary=e},qn=function(){var e,t;(t=(e=this.currentSummary)==null?void 0:e.querySelector("rect"))==null||t.remove(),this.currentSummary=null},Kn=function(){this.summarySvg.innerHTML="",this.summaries.forEach(e=>{try{we(this,e)}catch{}}),this.nodes.insertAdjacentElement("beforeend",this.summarySvg)},Un=function(e){if(!e)return;const t=e.childNodes[1];Re(this,t,n=>{var i;const o=e.summaryObj,r=((i=n.textContent)==null?void 0:i.trim())||"";r===""?o.text=origin:o.text=r,n.remove(),r!==origin&&(t.innerHTML=o.text,this.linkDiv(),this.bus.fire("operation",{name:"finishEditSummary",obj:o}))})},Zn=Object.freeze(Object.defineProperty({__proto__:null,createSummary:Yn,createSummaryFrom:Fn,editSummary:Un,removeSummary:Wn,renderSummary:Kn,selectSummary:Vn,unselectSummary:qn},Symbol.toStringTag,{value:"Module"})),z="http://www.w3.org/2000/svg";function Jn(e,t){const n=document.createElementNS(z,"svg");return N(n,{version:"1.1",xmlns:z,height:e,width:t}),n}function Gn(e,t){return(parseInt(e)-parseInt(t))/2}function Xn(e,t,n,i){const o=document.createElementNS(z,"g");let r="";return e.text?r=e.text.textContent:r=e.childNodes[0].textContent,r.split(`
`).forEach((s,l)=>{const a=document.createElementNS(z,"text");N(a,{x:n+parseInt(t.paddingLeft)+"",y:i+parseInt(t.paddingTop)+Gn(t.lineHeight,t.fontSize)*(l+1)+parseFloat(t.fontSize)*(l+1)+"","text-anchor":"start","font-family":t.fontFamily,"font-size":`${t.fontSize}`,"font-weight":`${t.fontWeight}`,fill:`${t.color}`}),a.innerHTML=s,o.appendChild(a)}),o}function Qn(e,t,n,i){var o;let r="";(o=e.nodeObj)!=null&&o.dangerouslySetInnerHTML?r=e.nodeObj.dangerouslySetInnerHTML:e.text?r=e.text.textContent:r=e.childNodes[0].textContent;const s=document.createElementNS(z,"foreignObject");N(s,{x:n+parseInt(t.paddingLeft)+"",y:i+parseInt(t.paddingTop)+"",width:t.width,height:t.height});const l=document.createElement("div");return N(l,{xmlns:"http://www.w3.org/1999/xhtml",style:`font-family: ${t.fontFamily}; font-size: ${t.fontSize}; font-weight: ${t.fontWeight}; color: ${t.color}; white-space: pre-wrap;`}),l.innerHTML=r,s.appendChild(l),s}function ei(e,t){const n=getComputedStyle(t),{offsetLeft:i,offsetTop:o}=P(e.nodes,t),r=document.createElementNS(z,"rect");return N(r,{x:i+"",y:o+"",rx:n.borderRadius,ry:n.borderRadius,width:n.width,height:n.height,fill:n.backgroundColor,stroke:n.borderColor,"stroke-width":n.borderWidth}),r}function ne(e,t,n=!1){const i=getComputedStyle(t),{offsetLeft:o,offsetTop:r}=P(e.nodes,t),s=document.createElementNS(z,"rect");N(s,{x:o+"",y:r+"",rx:i.borderRadius,ry:i.borderRadius,width:i.width,height:i.height,fill:i.backgroundColor,stroke:i.borderColor,"stroke-width":i.borderWidth});const l=document.createElementNS(z,"g");l.appendChild(s);let a;return n?a=Qn(t,i,o,r):a=Xn(t,i,o,r),l.appendChild(a),l}function ti(e,t){const n=getComputedStyle(t),{offsetLeft:i,offsetTop:o}=P(e.nodes,t),r=document.createElementNS(z,"a"),s=document.createElementNS(z,"text");return N(s,{x:i+"",y:o+parseInt(n.fontSize)+"","text-anchor":"start","font-family":n.fontFamily,"font-size":`${n.fontSize}`,"font-weight":`${n.fontWeight}`,fill:`${n.color}`}),s.innerHTML=t.textContent,r.appendChild(s),r.setAttribute("href",t.href),r}function ni(e,t){const n=getComputedStyle(t),{offsetLeft:i,offsetTop:o}=P(e.nodes,t),r=document.createElementNS(z,"image");return N(r,{x:i+"",y:o+"",width:n.width+"",height:n.height+"",href:t.src}),r}const ie=100,ii='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">',oi=(e,t=!1)=>{var n,i,o;const r=e.nodes,s=r.offsetHeight+ie*2,l=r.offsetWidth+ie*2,a=Jn(s+"px",l+"px"),c=document.createElementNS(z,"svg"),d=document.createElementNS(z,"rect");N(d,{x:"0",y:"0",width:`${l}`,height:`${s}`,fill:e.theme.cssVar["--bgcolor"]}),a.appendChild(d),r.querySelectorAll(".subLines").forEach(f=>{const v=f.cloneNode(!0),{offsetLeft:g,offsetTop:u}=P(r,f.parentElement);v.setAttribute("x",`${g}`),v.setAttribute("y",`${u}`),c.appendChild(v)});const p=(n=r.querySelector(".lines"))==null?void 0:n.cloneNode(!0);p&&c.appendChild(p);const h=(i=r.querySelector(".topiclinks"))==null?void 0:i.cloneNode(!0);h&&c.appendChild(h);const m=(o=r.querySelector(".summary"))==null?void 0:o.cloneNode(!0);return m&&c.appendChild(m),r.querySelectorAll("me-tpc").forEach(f=>{f.nodeObj.dangerouslySetInnerHTML?c.appendChild(ne(e,f,!t)):(c.appendChild(ei(e,f)),c.appendChild(ne(e,f.text,!t)))}),r.querySelectorAll(".tags > span").forEach(f=>{c.appendChild(ne(e,f))}),r.querySelectorAll(".icons > span").forEach(f=>{c.appendChild(ne(e,f))}),r.querySelectorAll(".hyper-link").forEach(f=>{c.appendChild(ti(e,f))}),r.querySelectorAll("img").forEach(f=>{c.appendChild(ni(e,f))}),N(c,{x:ie+"",y:ie+"",overflow:"visible"}),a.appendChild(c),a},ri=(e,t)=>(t&&e.insertAdjacentHTML("afterbegin","<style>"+t+"</style>"),ii+e.outerHTML);function si(e){return new Promise((t,n)=>{const i=new FileReader;i.onload=o=>{t(o.target.result)},i.onerror=o=>{n(o)},i.readAsDataURL(e)})}const li=function(e=!1,t){const n=oi(this,e),i=ri(n,t);return new Blob([i],{type:"image/svg+xml"})},ai=async function(e=!1,t){const n=this.exportSvg(e,t),i=await si(n);return new Promise((o,r)=>{const s=new Image;s.setAttribute("crossOrigin","anonymous"),s.onload=()=>{const l=document.createElement("canvas");l.width=s.width,l.height=s.height,l.getContext("2d").drawImage(s,0,0),l.toBlob(o,"image/png",1)},s.src=i,s.onerror=r})},ci=Object.freeze(Object.defineProperty({__proto__:null,exportPng:ai,exportSvg:li},Symbol.toStringTag,{value:"Module"}));function di(e,t){return async function(...n){const i=this.before[t];i&&!await i.apply(this,n)||e.apply(this,n)}}const Ie=Object.keys(Je),et={};for(let e=0;e<Ie.length;e++){const t=Ie[e];et[t]=di(Je[t],t)}const hi={getObjById:re,generateNewObj:tt,layout:ot,linkDiv:ut,editTopic:ht,createWrapper:lt,createParent:at,createChildren:ct,createTopic:dt,findEle:E,changeTheme:Ot,...Ln,...et,...On,...Zn,...ci,init(e){if(e=JSON.parse(JSON.stringify(e)),!e||!e.nodeData)return new Error("MindElixir: `data` is required");e.direction!==void 0&&(this.direction=e.direction),this.changeTheme(e.theme||this.theme,!1),this.nodeData=e.nodeData,$(this.nodeData),this.arrows=e.arrows||[],this.summaries=e.summaries||[],this.tidyArrow(),this.toolBar&&jt(this),this.keypress&&xt(this,this.keypress),this.editable&&It(this),this.contextMenu&&this.disposable.push(mt(this,this.contextMenu)),this.draggable&&Nt(this),this.allowUndo&&Ct(this),this.toCenter(),this.layout(),this.linkDiv()},destroy(){var e;this.disposable.forEach(t=>t()),this.el&&(this.el.innerHTML=""),this.el=void 0,this.nodeData=void 0,this.arrows=void 0,this.summaries=void 0,this.currentArrow=void 0,this.currentNode=void 0,this.currentNodes=void 0,this.currentSummary=void 0,this.waitCopy=void 0,this.theme=void 0,this.direction=void 0,this.bus=void 0,this.container=void 0,this.map=void 0,this.lines=void 0,this.linkController=void 0,this.linkSvgGroup=void 0,this.P2=void 0,this.P3=void 0,this.line1=void 0,this.line2=void 0,this.nodes=void 0,(e=this.selection)==null||e.destroy(),this.selection=void 0}};function pi({pT:e,pL:t,pW:n,pH:i,cT:o,cL:r,cW:s,cH:l,direction:a,containerHeight:c}){let d=t+n/2;const p=e+i/2;let h;a===j.LHS?h=r+s:h=r;const m=o+l/2,f=(1-Math.abs(m-p)/c)*.25*(n/2);return a===j.LHS?d=d-n/10-f:d=d+n/10+f,`M ${d} ${p} Q ${d} ${m} ${h} ${m}`}function ui({pT:e,pL:t,pW:n,pH:i,cT:o,cL:r,cW:s,cH:l,direction:a,isFirst:c}){const d=parseInt(this.container.style.getPropertyValue("--gap"));let p=0,h=0;c?p=e+i/2:p=e+i;const m=o+l;let f=0,v=0,g=0;const u=Math.abs(p-m)/300*d;return a===j.LHS?(g=t,f=g+d,v=g-d,h=r+d,`M ${f} ${p} C ${g} ${p} ${g+u} ${m} ${v} ${m} H ${h}`):(g=t+n,f=g-d,v=g+d,h=r+s-d,`M ${f} ${p} C ${g} ${p} ${g-u} ${m} ${v} ${m} H ${h}`)}const mi="4.6.2",J=document;function D({el:e,direction:t,locale:n,draggable:i,editable:o,contextMenu:r,toolBar:s,keypress:l,mouseSelectionButton:a,selectionContainer:c,before:d,newTopicName:p,allowUndo:h,generateMainBranch:m,generateSubBranch:f,overflowHidden:v,theme:g,alignment:u,scaleSensitivity:b}){let x=null;const C=Object.prototype.toString.call(e);if(C==="[object HTMLDivElement]"?x=e:C==="[object String]"&&(x=document.querySelector(e)),!x)throw new Error("MindElixir: el is not a valid element");x.style.position="relative",x.innerHTML="",this.el=x,this.disposable=[],this.before=d||{},this.locale=n||"en",this.contextMenu=r===void 0?!0:r,this.toolBar=s===void 0?!0:s,this.keypress=l===void 0?!0:l,this.mouseSelectionButton=a||0,this.direction=typeof t=="number"?t:1,this.draggable=i===void 0?!0:i,this.newTopicName=p||"new node",this.editable=o===void 0?!0:o,this.allowUndo=h===void 0?!1:h,this.scaleSensitivity=typeof b=="number"?b:.2,this.currentNode=null,this.currentArrow=null,this.scaleVal=1,this.tempDirection=null,this.generateMainBranch=m||pi,this.generateSubBranch=f||ui,this.overflowHidden=v||!1,this.bus=it.create(),this.container=J.createElement("div"),this.selectionContainer=c||this.container,this.container.className="map-container";const y=window.matchMedia("(prefers-color-scheme: dark)");this.theme=g||(y.matches?$e:Oe);const w=J.createElement("div");w.className="map-canvas",this.map=w,this.map.setAttribute("tabindex","0"),this.container.appendChild(this.map),this.el.appendChild(this.container),this.nodes=J.createElement("me-nodes"),this.nodes.className="main-node-container",this.lines=G("lines"),this.summarySvg=G("summary"),this.linkController=G("linkcontroller"),this.P2=J.createElement("div"),this.P3=J.createElement("div"),this.P2.className=this.P3.className="circle",this.P2.style.display=this.P3.style.display="none",this.line1=Me(),this.line2=Me(),this.linkController.appendChild(this.line1),this.linkController.appendChild(this.line2),this.linkSvgGroup=G("topiclinks"),this.alignment=u??"root",this.map.appendChild(this.nodes),this.overflowHidden?this.container.style.overflow="hidden":nt(this)}D.prototype=hi;D.LEFT=T;D.RIGHT=O;D.SIDE=ce;D.THEME=Oe;D.DARK_THEME=$e;D.version=mi;D.E=E;D.new=e=>({nodeData:{id:q(),topic:e||"new topic",children:[]}});D.dragMoveHelper=k;export{D as default};
