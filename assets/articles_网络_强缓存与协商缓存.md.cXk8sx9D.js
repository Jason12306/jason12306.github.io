import{_ as e,c as t,o,a2 as i}from"./chunks/framework.CnKoBJ9A.js";const m=JSON.parse('{"title":"强缓存与协商缓存","description":"","frontmatter":{},"headers":[],"relativePath":"articles/网络/强缓存与协商缓存.md","filePath":"articles/网络/强缓存与协商缓存.md"}'),c={name:"articles/网络/强缓存与协商缓存.md"};function s(l,a,r,d,p,h){return o(),t("div",null,a[0]||(a[0]=[i('<h1 id="强缓存与协商缓存" tabindex="-1">强缓存与协商缓存 <a class="header-anchor" href="#强缓存与协商缓存" aria-label="Permalink to &quot;强缓存与协商缓存&quot;">​</a></h1><h2 id="强缓存" tabindex="-1">强缓存 <a class="header-anchor" href="#强缓存" aria-label="Permalink to &quot;强缓存&quot;">​</a></h2><p>浏览器不会向服务器发送任何请求，直接从本地缓存中读取文件并返回 Status Code: 200 OK</p><div class="tip custom-block"><p class="custom-block-title">200 form memory cache</p><p>不访问服务器，一般已经加载过该资源且缓存在了内存当中，直接从内存中读取缓存。浏览器关闭后，数据将不存在（资源被释放掉了），再次打开相同的页面时，不会出现 from memory cache。</p></div><div class="tip custom-block"><p class="custom-block-title">200 from disk cache</p><p>不访问服务器，已经在之前的某个时间加载过该资源，直接从硬盘中读取缓存，关闭浏览器后，数据依然存在，此资源不会随着该页面的关闭而释放掉下次打开仍然会是 from disk cache。</p></div><h2 id="协商缓存" tabindex="-1">协商缓存 <a class="header-anchor" href="#协商缓存" aria-label="Permalink to &quot;协商缓存&quot;">​</a></h2><p>向服务器发送请求，服务器会根据这个请求的 request header 的一些参数来判断是否命中协商缓存，如果命中，则返回 304 状态码并带上新的 response header 通知浏览器从缓存中读取资源；</p><h2 id="强缓存和协商缓存的-header-参数" tabindex="-1">强缓存和协商缓存的 header 参数 <a class="header-anchor" href="#强缓存和协商缓存的-header-参数" aria-label="Permalink to &quot;强缓存和协商缓存的 header 参数&quot;">​</a></h2><h3 id="强缓存-1" tabindex="-1">强缓存 <a class="header-anchor" href="#强缓存-1" aria-label="Permalink to &quot;强缓存&quot;">​</a></h3><ul><li><p>Expires：过期时间，如果设置了时间，则浏览器会在设置的时间内直接读取缓存，不再请求</p></li><li><p>Cache-Control：当值设为 max-age=300 时，则代表在这个请求正确返回时间（浏览器也会记录下来）的 5 分钟内再次加载资源，就会命中强缓存。</p></li></ul><h3 id="协商缓存-1" tabindex="-1">协商缓存 <a class="header-anchor" href="#协商缓存-1" aria-label="Permalink to &quot;协商缓存&quot;">​</a></h3><blockquote><p>Last-Modifed/If-Modified-Since 和 Etag/If-None-Match 是分别成对出现的，呈一一对应关系</p></blockquote><div class="tip custom-block"><p class="custom-block-title">Etag</p><p>Etag 是属于 HTTP 1.1 属性，它是由服务器（Apache 或者其他工具）生成返回给前端，用来帮助服务器控制 Web 端的缓存验证。 Apache 中，ETag 的值，默认是对文件的索引节（INode），大小（Size）和最后修改时间（MTime）进行 Hash 后得到的。</p></div><div class="tip custom-block"><p class="custom-block-title">If-None-Match</p><p>当资源过期时，浏览器发现响应头里有 Etag,则再次像服务器请求时带上请求头 if-none-match(值是 Etag 的值)。服务器收到请求进行比对，决定返回 200 或 304</p></div><div class="tip custom-block"><p class="custom-block-title">Last-Modified</p><p>服务器向浏览器发送最后的修改时间</p></div><div class="tip custom-block"><p class="custom-block-title">If-Modified-Since</p><p>服务器向浏览器发送最后的修改时间 当资源过期时（浏览器判断 Cache-Control 标识的 max-age 过期），发现响应头具有 Last-Modified 声明，则再次向服务器请求时带上头 if-modified-since，表示请求时间。服务器收到请求后发现有 if-modified-since 则与被请求资源的最后修改时间进行对比（Last-Modified）,若最后修改时间较新（大），说明资源又被改过，则返回最新资源，HTTP 200 OK;若最后修改时间较旧（小），说明资源无新修改，响应 HTTP 304 走缓存。</p></div><p><a href="https://juejin.cn/post/6844903838768431118#heading-6" target="_blank" rel="noreferrer">参考资料</a></p>',17)]))}const u=e(c,[["render",s]]);export{m as __pageData,u as default};
